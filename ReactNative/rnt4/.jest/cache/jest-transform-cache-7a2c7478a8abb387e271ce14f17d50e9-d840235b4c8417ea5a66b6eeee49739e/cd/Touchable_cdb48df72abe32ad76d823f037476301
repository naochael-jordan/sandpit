10349410e026e0579ec779ca74b17355


'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var BoundingDimensions = require('BoundingDimensions');
var Platform = require('Platform');
var Position = require('Position');
var React = require('React');
var ReactNative = require('ReactNative');
var TVEventHandler = require('TVEventHandler');
var TouchEventUtils = require('fbjs/lib/TouchEventUtils');
var UIManager = require('UIManager');
var View = require('View');

var keyMirror = require('fbjs/lib/keyMirror');
var normalizeColor = require('normalizeColor');

var States = keyMirror({
  NOT_RESPONDER: null,
  RESPONDER_INACTIVE_PRESS_IN: null,
  RESPONDER_INACTIVE_PRESS_OUT: null,
  RESPONDER_ACTIVE_PRESS_IN: null,
  RESPONDER_ACTIVE_PRESS_OUT: null,
  RESPONDER_ACTIVE_LONG_PRESS_IN: null,
  RESPONDER_ACTIVE_LONG_PRESS_OUT: null,
  ERROR: null
});

var IsActive = {
  RESPONDER_ACTIVE_PRESS_OUT: true,
  RESPONDER_ACTIVE_PRESS_IN: true
};

var IsPressingIn = {
  RESPONDER_INACTIVE_PRESS_IN: true,
  RESPONDER_ACTIVE_PRESS_IN: true,
  RESPONDER_ACTIVE_LONG_PRESS_IN: true
};

var IsLongPressingIn = {
  RESPONDER_ACTIVE_LONG_PRESS_IN: true
};

var Signals = keyMirror({
  DELAY: null,
  RESPONDER_GRANT: null,
  RESPONDER_RELEASE: null,
  RESPONDER_TERMINATED: null,
  ENTER_PRESS_RECT: null,
  LEAVE_PRESS_RECT: null,
  LONG_PRESS_DETECTED: null
});

var Transitions = {
  NOT_RESPONDER: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,
    RESPONDER_RELEASE: States.ERROR,
    RESPONDER_TERMINATED: States.ERROR,
    ENTER_PRESS_RECT: States.ERROR,
    LEAVE_PRESS_RECT: States.ERROR,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_INACTIVE_PRESS_IN: {
    DELAY: States.RESPONDER_ACTIVE_PRESS_IN,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_INACTIVE_PRESS_OUT: {
    DELAY: States.RESPONDER_ACTIVE_PRESS_OUT,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_ACTIVE_PRESS_IN: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN
  },
  RESPONDER_ACTIVE_PRESS_OUT: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_ACTIVE_LONG_PRESS_IN: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN
  },
  RESPONDER_ACTIVE_LONG_PRESS_OUT: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  error: {
    DELAY: States.NOT_RESPONDER,
    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.NOT_RESPONDER,
    LEAVE_PRESS_RECT: States.NOT_RESPONDER,
    LONG_PRESS_DETECTED: States.NOT_RESPONDER
  }
};

var HIGHLIGHT_DELAY_MS = 130;

var PRESS_EXPAND_PX = 20;

var LONG_PRESS_THRESHOLD = 500;

var LONG_PRESS_DELAY_MS = LONG_PRESS_THRESHOLD - HIGHLIGHT_DELAY_MS;

var LONG_PRESS_ALLOWED_MOVEMENT = 10;

var TouchableMixin = {
  componentDidMount: function componentDidMount() {
    if (!Platform.isTV) {
      return;
    }

    this._tvEventHandler = new TVEventHandler();
    this._tvEventHandler.enable(this, function (cmp, evt) {
      var myTag = ReactNative.findNodeHandle(cmp);
      evt.dispatchConfig = {};
      if (myTag === evt.tag) {
        if (evt.eventType === 'focus') {
          cmp.touchableHandleFocus(evt);
        } else if (evt.eventType === 'blur') {
          cmp.touchableHandleBlur(evt);
        } else if (evt.eventType === 'select') {
          cmp.touchableHandlePress && !cmp.props.disabled && cmp.touchableHandlePress(evt);
        }
      }
    });
  },

  componentWillUnmount: function componentWillUnmount() {
    if (this._tvEventHandler) {
      this._tvEventHandler.disable();
      delete this._tvEventHandler;
    }
    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);
    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);
    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);
  },

  touchableGetInitialState: function touchableGetInitialState() {
    return {
      touchable: { touchState: undefined, responderID: null }
    };
  },

  touchableHandleResponderTerminationRequest: function touchableHandleResponderTerminationRequest() {
    return !this.props.rejectResponderTermination;
  },

  touchableHandleStartShouldSetResponder: function touchableHandleStartShouldSetResponder() {
    return !this.props.disabled;
  },

  touchableLongPressCancelsPress: function touchableLongPressCancelsPress() {
    return true;
  },

  touchableHandleResponderGrant: function touchableHandleResponderGrant(e) {
    var dispatchID = e.currentTarget;

    e.persist();

    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);
    this.pressOutDelayTimeout = null;

    this.state.touchable.touchState = States.NOT_RESPONDER;
    this.state.touchable.responderID = dispatchID;
    this._receiveSignal(Signals.RESPONDER_GRANT, e);
    var delayMS = this.touchableGetHighlightDelayMS !== undefined ? Math.max(this.touchableGetHighlightDelayMS(), 0) : HIGHLIGHT_DELAY_MS;
    delayMS = isNaN(delayMS) ? HIGHLIGHT_DELAY_MS : delayMS;
    if (delayMS !== 0) {
      this.touchableDelayTimeout = setTimeout(this._handleDelay.bind(this, e), delayMS);
    } else {
      this._handleDelay(e);
    }

    var longDelayMS = this.touchableGetLongPressDelayMS !== undefined ? Math.max(this.touchableGetLongPressDelayMS(), 10) : LONG_PRESS_DELAY_MS;
    longDelayMS = isNaN(longDelayMS) ? LONG_PRESS_DELAY_MS : longDelayMS;
    this.longPressDelayTimeout = setTimeout(this._handleLongDelay.bind(this, e), longDelayMS + delayMS);
  },

  touchableHandleResponderRelease: function touchableHandleResponderRelease(e) {
    this._receiveSignal(Signals.RESPONDER_RELEASE, e);
  },

  touchableHandleResponderTerminate: function touchableHandleResponderTerminate(e) {
    this._receiveSignal(Signals.RESPONDER_TERMINATED, e);
  },

  touchableHandleResponderMove: function touchableHandleResponderMove(e) {
    if (this.state.touchable.touchState === States.RESPONDER_INACTIVE_PRESS_IN) {
      return;
    }

    if (!this.state.touchable.positionOnActivate) {
      return;
    }

    var positionOnActivate = this.state.touchable.positionOnActivate;
    var dimensionsOnActivate = this.state.touchable.dimensionsOnActivate;
    var pressRectOffset = this.touchableGetPressRectOffset ? this.touchableGetPressRectOffset() : {
      left: PRESS_EXPAND_PX,
      right: PRESS_EXPAND_PX,
      top: PRESS_EXPAND_PX,
      bottom: PRESS_EXPAND_PX
    };

    var pressExpandLeft = pressRectOffset.left;
    var pressExpandTop = pressRectOffset.top;
    var pressExpandRight = pressRectOffset.right;
    var pressExpandBottom = pressRectOffset.bottom;

    var hitSlop = this.touchableGetHitSlop ? this.touchableGetHitSlop() : null;

    if (hitSlop) {
      pressExpandLeft += hitSlop.left;
      pressExpandTop += hitSlop.top;
      pressExpandRight += hitSlop.right;
      pressExpandBottom += hitSlop.bottom;
    }

    var touch = TouchEventUtils.extractSingleTouch(e.nativeEvent);
    var pageX = touch && touch.pageX;
    var pageY = touch && touch.pageY;

    if (this.pressInLocation) {
      var movedDistance = this._getDistanceBetweenPoints(pageX, pageY, this.pressInLocation.pageX, this.pressInLocation.pageY);
      if (movedDistance > LONG_PRESS_ALLOWED_MOVEMENT) {
        this._cancelLongPressDelayTimeout();
      }
    }

    var isTouchWithinActive = pageX > positionOnActivate.left - pressExpandLeft && pageY > positionOnActivate.top - pressExpandTop && pageX < positionOnActivate.left + dimensionsOnActivate.width + pressExpandRight && pageY < positionOnActivate.top + dimensionsOnActivate.height + pressExpandBottom;
    if (isTouchWithinActive) {
      this._receiveSignal(Signals.ENTER_PRESS_RECT, e);
      var curState = this.state.touchable.touchState;
      if (curState === States.RESPONDER_INACTIVE_PRESS_IN) {
        this._cancelLongPressDelayTimeout();
      }
    } else {
      this._cancelLongPressDelayTimeout();
      this._receiveSignal(Signals.LEAVE_PRESS_RECT, e);
    }
  },

  touchableHandleFocus: function touchableHandleFocus(e) {
    this.props.onFocus && this.props.onFocus(e);
  },

  touchableHandleBlur: function touchableHandleBlur(e) {
    this.props.onBlur && this.props.onBlur(e);
  },

  _remeasureMetricsOnActivation: function _remeasureMetricsOnActivation() {
    var tag = this.state.touchable.responderID;
    if (tag == null) {
      return;
    }

    UIManager.measure(tag, this._handleQueryLayout);
  },

  _handleQueryLayout: function _handleQueryLayout(l, t, w, h, globalX, globalY) {
    if (!l && !t && !w && !h && !globalX && !globalY) {
      return;
    }
    this.state.touchable.positionOnActivate && Position.release(this.state.touchable.positionOnActivate);
    this.state.touchable.dimensionsOnActivate && BoundingDimensions.release(this.state.touchable.dimensionsOnActivate);
    this.state.touchable.positionOnActivate = Position.getPooled(globalX, globalY);
    this.state.touchable.dimensionsOnActivate = BoundingDimensions.getPooled(w, h);
  },

  _handleDelay: function _handleDelay(e) {
    this.touchableDelayTimeout = null;
    this._receiveSignal(Signals.DELAY, e);
  },

  _handleLongDelay: function _handleLongDelay(e) {
    this.longPressDelayTimeout = null;
    var curState = this.state.touchable.touchState;
    if (curState !== States.RESPONDER_ACTIVE_PRESS_IN && curState !== States.RESPONDER_ACTIVE_LONG_PRESS_IN) {
      console.error('Attempted to transition from state `' + curState + '` to `' + States.RESPONDER_ACTIVE_LONG_PRESS_IN + '`, which is not supported. This is ' + 'most likely due to `Touchable.longPressDelayTimeout` not being cancelled.');
    } else {
      this._receiveSignal(Signals.LONG_PRESS_DETECTED, e);
    }
  },

  _receiveSignal: function _receiveSignal(signal, e) {
    var responderID = this.state.touchable.responderID;
    var curState = this.state.touchable.touchState;
    var nextState = Transitions[curState] && Transitions[curState][signal];
    if (!responderID && signal === Signals.RESPONDER_RELEASE) {
      return;
    }
    if (!nextState) {
      throw new Error('Unrecognized signal `' + signal + '` or state `' + curState + '` for Touchable responder `' + responderID + '`');
    }
    if (nextState === States.ERROR) {
      throw new Error('Touchable cannot transition from `' + curState + '` to `' + signal + '` for responder `' + responderID + '`');
    }
    if (curState !== nextState) {
      this._performSideEffectsForTransition(curState, nextState, signal, e);
      this.state.touchable.touchState = nextState;
    }
  },

  _cancelLongPressDelayTimeout: function _cancelLongPressDelayTimeout() {
    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);
    this.longPressDelayTimeout = null;
  },

  _isHighlight: function _isHighlight(state) {
    return state === States.RESPONDER_ACTIVE_PRESS_IN || state === States.RESPONDER_ACTIVE_LONG_PRESS_IN;
  },

  _savePressInLocation: function _savePressInLocation(e) {
    var touch = TouchEventUtils.extractSingleTouch(e.nativeEvent);
    var pageX = touch && touch.pageX;
    var pageY = touch && touch.pageY;
    var locationX = touch && touch.locationX;
    var locationY = touch && touch.locationY;
    this.pressInLocation = { pageX: pageX, pageY: pageY, locationX: locationX, locationY: locationY };
  },

  _getDistanceBetweenPoints: function _getDistanceBetweenPoints(aX, aY, bX, bY) {
    var deltaX = aX - bX;
    var deltaY = aY - bY;
    return Math.sqrt(deltaX * deltaX + deltaY * deltaY);
  },

  _performSideEffectsForTransition: function _performSideEffectsForTransition(curState, nextState, signal, e) {
    var curIsHighlight = this._isHighlight(curState);
    var newIsHighlight = this._isHighlight(nextState);

    var isFinalSignal = signal === Signals.RESPONDER_TERMINATED || signal === Signals.RESPONDER_RELEASE;

    if (isFinalSignal) {
      this._cancelLongPressDelayTimeout();
    }

    if (!IsActive[curState] && IsActive[nextState]) {
      this._remeasureMetricsOnActivation();
    }

    if (IsPressingIn[curState] && signal === Signals.LONG_PRESS_DETECTED) {
      this.touchableHandleLongPress && this.touchableHandleLongPress(e);
    }

    if (newIsHighlight && !curIsHighlight) {
      this._startHighlight(e);
    } else if (!newIsHighlight && curIsHighlight) {
      this._endHighlight(e);
    }

    if (IsPressingIn[curState] && signal === Signals.RESPONDER_RELEASE) {
      var hasLongPressHandler = !!this.props.onLongPress;
      var pressIsLongButStillCallOnPress = IsLongPressingIn[curState] && (!hasLongPressHandler || !this.touchableLongPressCancelsPress());

      var shouldInvokePress = !IsLongPressingIn[curState] || pressIsLongButStillCallOnPress;
      if (shouldInvokePress && this.touchableHandlePress) {
        if (!newIsHighlight && !curIsHighlight) {
          this._startHighlight(e);
          this._endHighlight(e);
        }
        if (Platform.OS === 'android') {
          this._playTouchSound();
        }
        this.touchableHandlePress(e);
      }
    }

    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);
    this.touchableDelayTimeout = null;
  },

  _playTouchSound: function _playTouchSound() {
    UIManager.playTouchSound();
  },

  _startHighlight: function _startHighlight(e) {
    this._savePressInLocation(e);
    this.touchableHandleActivePressIn && this.touchableHandleActivePressIn(e);
  },

  _endHighlight: function _endHighlight(e) {
    var _this = this;

    if (this.touchableHandleActivePressOut) {
      if (this.touchableGetPressOutDelayMS && this.touchableGetPressOutDelayMS()) {
        this.pressOutDelayTimeout = setTimeout(function () {
          _this.touchableHandleActivePressOut(e);
        }, this.touchableGetPressOutDelayMS());
      } else {
        this.touchableHandleActivePressOut(e);
      }
    }
  }
};

var Touchable = {
  Mixin: TouchableMixin,
  TOUCH_TARGET_DEBUG: false,
  renderDebugView: function renderDebugView(_ref) {
    var color = _ref.color,
        hitSlop = _ref.hitSlop;

    if (!Touchable.TOUCH_TARGET_DEBUG) {
      return null;
    }
    if (!__DEV__) {
      throw Error('Touchable.TOUCH_TARGET_DEBUG should not be enabled in prod!');
    }
    var debugHitSlopStyle = {};
    hitSlop = hitSlop || { top: 0, bottom: 0, left: 0, right: 0 };
    for (var key in hitSlop) {
      debugHitSlopStyle[key] = -hitSlop[key];
    }
    var hexColor = '#' + ('00000000' + normalizeColor(color).toString(16)).substr(-8);
    return React.createElement(View, {
      pointerEvents: 'none',
      style: _extends({
        position: 'absolute',
        borderColor: hexColor.slice(0, -2) + '55',
        borderWidth: 1,
        borderStyle: 'dashed',
        backgroundColor: hexColor.slice(0, -2) + '0F' }, debugHitSlopStyle)
    });
  }
};

module.exports = Touchable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZS5qcyJdLCJuYW1lcyI6WyJCb3VuZGluZ0RpbWVuc2lvbnMiLCJyZXF1aXJlIiwiUGxhdGZvcm0iLCJQb3NpdGlvbiIsIlJlYWN0IiwiUmVhY3ROYXRpdmUiLCJUVkV2ZW50SGFuZGxlciIsIlRvdWNoRXZlbnRVdGlscyIsIlVJTWFuYWdlciIsIlZpZXciLCJrZXlNaXJyb3IiLCJub3JtYWxpemVDb2xvciIsIlN0YXRlcyIsIk5PVF9SRVNQT05ERVIiLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4iLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTiIsIlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCIsIkVSUk9SIiwiSXNBY3RpdmUiLCJJc1ByZXNzaW5nSW4iLCJJc0xvbmdQcmVzc2luZ0luIiwiU2lnbmFscyIsIkRFTEFZIiwiUkVTUE9OREVSX0dSQU5UIiwiUkVTUE9OREVSX1JFTEVBU0UiLCJSRVNQT05ERVJfVEVSTUlOQVRFRCIsIkVOVEVSX1BSRVNTX1JFQ1QiLCJMRUFWRV9QUkVTU19SRUNUIiwiTE9OR19QUkVTU19ERVRFQ1RFRCIsIlRyYW5zaXRpb25zIiwiZXJyb3IiLCJISUdITElHSFRfREVMQVlfTVMiLCJQUkVTU19FWFBBTkRfUFgiLCJMT05HX1BSRVNTX1RIUkVTSE9MRCIsIkxPTkdfUFJFU1NfREVMQVlfTVMiLCJMT05HX1BSRVNTX0FMTE9XRURfTU9WRU1FTlQiLCJUb3VjaGFibGVNaXhpbiIsImNvbXBvbmVudERpZE1vdW50IiwiaXNUViIsIl90dkV2ZW50SGFuZGxlciIsImVuYWJsZSIsImNtcCIsImV2dCIsIm15VGFnIiwiZmluZE5vZGVIYW5kbGUiLCJkaXNwYXRjaENvbmZpZyIsInRhZyIsImV2ZW50VHlwZSIsInRvdWNoYWJsZUhhbmRsZUZvY3VzIiwidG91Y2hhYmxlSGFuZGxlQmx1ciIsInRvdWNoYWJsZUhhbmRsZVByZXNzIiwicHJvcHMiLCJkaXNhYmxlZCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZGlzYWJsZSIsInRvdWNoYWJsZURlbGF5VGltZW91dCIsImNsZWFyVGltZW91dCIsImxvbmdQcmVzc0RlbGF5VGltZW91dCIsInByZXNzT3V0RGVsYXlUaW1lb3V0IiwidG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlIiwidG91Y2hhYmxlIiwidG91Y2hTdGF0ZSIsInVuZGVmaW5lZCIsInJlc3BvbmRlcklEIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0IiwicmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24iLCJ0b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlciIsInRvdWNoYWJsZUxvbmdQcmVzc0NhbmNlbHNQcmVzcyIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50IiwiZSIsImRpc3BhdGNoSUQiLCJjdXJyZW50VGFyZ2V0IiwicGVyc2lzdCIsInN0YXRlIiwiX3JlY2VpdmVTaWduYWwiLCJkZWxheU1TIiwidG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUyIsIk1hdGgiLCJtYXgiLCJpc05hTiIsInNldFRpbWVvdXQiLCJfaGFuZGxlRGVsYXkiLCJiaW5kIiwibG9uZ0RlbGF5TVMiLCJ0b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TIiwiX2hhbmRsZUxvbmdEZWxheSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2UiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlIiwicG9zaXRpb25PbkFjdGl2YXRlIiwiZGltZW5zaW9uc09uQWN0aXZhdGUiLCJwcmVzc1JlY3RPZmZzZXQiLCJ0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQiLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJwcmVzc0V4cGFuZExlZnQiLCJwcmVzc0V4cGFuZFRvcCIsInByZXNzRXhwYW5kUmlnaHQiLCJwcmVzc0V4cGFuZEJvdHRvbSIsImhpdFNsb3AiLCJ0b3VjaGFibGVHZXRIaXRTbG9wIiwidG91Y2giLCJleHRyYWN0U2luZ2xlVG91Y2giLCJuYXRpdmVFdmVudCIsInBhZ2VYIiwicGFnZVkiLCJwcmVzc0luTG9jYXRpb24iLCJtb3ZlZERpc3RhbmNlIiwiX2dldERpc3RhbmNlQmV0d2VlblBvaW50cyIsIl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQiLCJpc1RvdWNoV2l0aGluQWN0aXZlIiwid2lkdGgiLCJoZWlnaHQiLCJjdXJTdGF0ZSIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfcmVtZWFzdXJlTWV0cmljc09uQWN0aXZhdGlvbiIsIm1lYXN1cmUiLCJfaGFuZGxlUXVlcnlMYXlvdXQiLCJsIiwidCIsInciLCJoIiwiZ2xvYmFsWCIsImdsb2JhbFkiLCJyZWxlYXNlIiwiZ2V0UG9vbGVkIiwiY29uc29sZSIsInNpZ25hbCIsIm5leHRTdGF0ZSIsIkVycm9yIiwiX3BlcmZvcm1TaWRlRWZmZWN0c0ZvclRyYW5zaXRpb24iLCJfaXNIaWdobGlnaHQiLCJfc2F2ZVByZXNzSW5Mb2NhdGlvbiIsImxvY2F0aW9uWCIsImxvY2F0aW9uWSIsImFYIiwiYVkiLCJiWCIsImJZIiwiZGVsdGFYIiwiZGVsdGFZIiwic3FydCIsImN1cklzSGlnaGxpZ2h0IiwibmV3SXNIaWdobGlnaHQiLCJpc0ZpbmFsU2lnbmFsIiwidG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzIiwiX3N0YXJ0SGlnaGxpZ2h0IiwiX2VuZEhpZ2hsaWdodCIsImhhc0xvbmdQcmVzc0hhbmRsZXIiLCJvbkxvbmdQcmVzcyIsInByZXNzSXNMb25nQnV0U3RpbGxDYWxsT25QcmVzcyIsInNob3VsZEludm9rZVByZXNzIiwiT1MiLCJfcGxheVRvdWNoU291bmQiLCJwbGF5VG91Y2hTb3VuZCIsInRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW4iLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dCIsInRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyIsIlRvdWNoYWJsZSIsIk1peGluIiwiVE9VQ0hfVEFSR0VUX0RFQlVHIiwicmVuZGVyRGVidWdWaWV3IiwiY29sb3IiLCJfX0RFVl9fIiwiZGVidWdIaXRTbG9wU3R5bGUiLCJrZXkiLCJoZXhDb2xvciIsInRvU3RyaW5nIiwic3Vic3RyIiwicG9zaXRpb24iLCJib3JkZXJDb2xvciIsInNsaWNlIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJTdHlsZSIsImJhY2tncm91bmRDb2xvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBU0E7Ozs7QUFFQSxJQUFNQSxxQkFBcUJDLFFBQVEsb0JBQVIsQ0FBM0I7QUFDQSxJQUFNQyxXQUFXRCxRQUFRLFVBQVIsQ0FBakI7QUFDQSxJQUFNRSxXQUFXRixRQUFRLFVBQVIsQ0FBakI7QUFDQSxJQUFNRyxRQUFRSCxRQUFRLE9BQVIsQ0FBZDtBQUNBLElBQU1JLGNBQWNKLFFBQVEsYUFBUixDQUFwQjtBQUNBLElBQU1LLGlCQUFpQkwsUUFBUSxnQkFBUixDQUF2QjtBQUNBLElBQU1NLGtCQUFrQk4sUUFBUSwwQkFBUixDQUF4QjtBQUNBLElBQU1PLFlBQVlQLFFBQVEsV0FBUixDQUFsQjtBQUNBLElBQU1RLE9BQU9SLFFBQVEsTUFBUixDQUFiOztBQUVBLElBQU1TLFlBQVlULFFBQVEsb0JBQVIsQ0FBbEI7QUFDQSxJQUFNVSxpQkFBaUJWLFFBQVEsZ0JBQVIsQ0FBdkI7O0FBMEZBLElBQU1XLFNBQVNGLFVBQVU7QUFDdkJHLGlCQUFlLElBRFE7QUFFdkJDLCtCQUE2QixJQUZOO0FBR3ZCQyxnQ0FBOEIsSUFIUDtBQUl2QkMsNkJBQTJCLElBSko7QUFLdkJDLDhCQUE0QixJQUxMO0FBTXZCQyxrQ0FBZ0MsSUFOVDtBQU92QkMsbUNBQWlDLElBUFY7QUFRdkJDLFNBQU87QUFSZ0IsQ0FBVixDQUFmOztBQWNBLElBQU1DLFdBQVc7QUFD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eUJBQWlCUixTQUFTSyxLQUFULENBQWUsQ0FBZixFQUFrQixDQUFDLENBQW5CLElBQXdCLElBTDNDLElBTUtQLGlCQU5MO0FBRkYsTUFERjtBQWFEO0FBbkNlLENBQWxCOztBQXNDQVcsT0FBT0MsT0FBUCxHQUFpQmxCLFNBQWpCIiwiZmlsZSI6IlRvdWNoYWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgQm91bmRpbmdEaW1lbnNpb25zID0gcmVxdWlyZSgnQm91bmRpbmdEaW1lbnNpb25zJyk7XG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJ1BsYXRmb3JtJyk7XG5jb25zdCBQb3NpdGlvbiA9IHJlcXVpcmUoJ1Bvc2l0aW9uJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ1JlYWN0Jyk7XG5jb25zdCBSZWFjdE5hdGl2ZSA9IHJlcXVpcmUoJ1JlYWN0TmF0aXZlJyk7XG5jb25zdCBUVkV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJ1RWRXZlbnRIYW5kbGVyJyk7XG5jb25zdCBUb3VjaEV2ZW50VXRpbHMgPSByZXF1aXJlKCdmYmpzL2xpYi9Ub3VjaEV2ZW50VXRpbHMnKTtcbmNvbnN0IFVJTWFuYWdlciA9IHJlcXVpcmUoJ1VJTWFuYWdlcicpO1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJ1ZpZXcnKTtcblxuY29uc3Qga2V5TWlycm9yID0gcmVxdWlyZSgnZmJqcy9saWIva2V5TWlycm9yJyk7XG5jb25zdCBub3JtYWxpemVDb2xvciA9IHJlcXVpcmUoJ25vcm1hbGl6ZUNvbG9yJyk7XG5cbi8qKlxuICogYFRvdWNoYWJsZWA6IFRhcHMgZG9uZSByaWdodC5cbiAqXG4gKiBZb3UgaG9vayB5b3VyIGBSZXNwb25kZXJFdmVudFBsdWdpbmAgZXZlbnRzIGludG8gYFRvdWNoYWJsZWAuIGBUb3VjaGFibGVgXG4gKiB3aWxsIG1lYXN1cmUgdGltZS9nZW9tZXRyeSBhbmQgdGVsbHMgeW91IHdoZW4gdG8gZ2l2ZSBmZWVkYmFjayB0byB0aGUgdXNlci5cbiAqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09IFRvdWNoYWJsZSBUdXRvcmlhbCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBUaGUgYFRvdWNoYWJsZWAgbWl4aW4gaGVscHMgeW91IGhhbmRsZSB0aGUgXCJwcmVzc1wiIGludGVyYWN0aW9uLiBJdCBhbmFseXplc1xuICogdGhlIGdlb21ldHJ5IG9mIGVsZW1lbnRzLCBhbmQgb2JzZXJ2ZXMgd2hlbiBhbm90aGVyIHJlc3BvbmRlciAoc2Nyb2xsIHZpZXdcbiAqIGV0YykgaGFzIHN0b2xlbiB0aGUgdG91Y2ggbG9jay4gSXQgbm90aWZpZXMgeW91ciBjb21wb25lbnQgd2hlbiBpdCBzaG91bGRcbiAqIGdpdmUgZmVlZGJhY2sgdG8gdGhlIHVzZXIuIChib3VuY2luZy9oaWdobGlnaHRpbmcvdW5oaWdobGlnaHRpbmcpLlxuICpcbiAqIC0gV2hlbiBhIHRvdWNoIHdhcyBhY3RpdmF0ZWQgKHR5cGljYWxseSB5b3UgaGlnaGxpZ2h0KVxuICogLSBXaGVuIGEgdG91Y2ggd2FzIGRlYWN0aXZhdGVkICh0eXBpY2FsbHkgeW91IHVuaGlnaGxpZ2h0KVxuICogLSBXaGVuIGEgdG91Y2ggd2FzIFwicHJlc3NlZFwiIC0gYSB0b3VjaCBlbmRlZCB3aGlsZSBzdGlsbCB3aXRoaW4gdGhlIGdlb21ldHJ5XG4gKiAgIG9mIHRoZSBlbGVtZW50LCBhbmQgbm8gb3RoZXIgZWxlbWVudCAobGlrZSBzY3JvbGxlcikgaGFzIFwic3RvbGVuXCIgdG91Y2hcbiAqICAgbG9jayAoXCJyZXNwb25kZXJcIikgKFR5cGljYWxseSB5b3UgYm91bmNlIHRoZSBlbGVtZW50KS5cbiAqXG4gKiBBIGdvb2QgdGFwIGludGVyYWN0aW9uIGlzbid0IGFzIHNpbXBsZSBhcyB5b3UgbWlnaHQgdGhpbmsuIFRoZXJlIHNob3VsZCBiZSBhXG4gKiBzbGlnaHQgZGVsYXkgYmVmb3JlIHNob3dpbmcgYSBoaWdobGlnaHQgd2hlbiBzdGFydGluZyBhIHRvdWNoLiBJZiBhXG4gKiBzdWJzZXF1ZW50IHRvdWNoIG1vdmUgZXhjZWVkcyB0aGUgYm91bmRhcnkgb2YgdGhlIGVsZW1lbnQsIGl0IHNob3VsZFxuICogdW5oaWdobGlnaHQsIGJ1dCBpZiB0aGF0IHNhbWUgdG91Y2ggaXMgYnJvdWdodCBiYWNrIHdpdGhpbiB0aGUgYm91bmRhcnksIGl0XG4gKiBzaG91bGQgcmVoaWdobGlnaHQgYWdhaW4uIEEgdG91Y2ggY2FuIG1vdmUgaW4gYW5kIG91dCBvZiB0aGF0IGJvdW5kYXJ5XG4gKiBzZXZlcmFsIHRpbWVzLCBlYWNoIHRpbWUgdG9nZ2xpbmcgaGlnaGxpZ2h0aW5nLCBidXQgYSBcInByZXNzXCIgaXMgb25seVxuICogdHJpZ2dlcmVkIGlmIHRoYXQgdG91Y2ggZW5kcyB3aGlsZSB3aXRoaW4gdGhlIGVsZW1lbnQncyBib3VuZGFyeSBhbmQgbm9cbiAqIHNjcm9sbGVyIChvciBhbnl0aGluZyBlbHNlKSBoYXMgc3RvbGVuIHRoZSBsb2NrIG9uIHRvdWNoZXMuXG4gKlxuICogVG8gY3JlYXRlIGEgbmV3IHR5cGUgb2YgY29tcG9uZW50IHRoYXQgaGFuZGxlcyBpbnRlcmFjdGlvbiB1c2luZyB0aGVcbiAqIGBUb3VjaGFibGVgIG1peGluLCBkbyB0aGUgZm9sbG93aW5nOlxuICpcbiAqIC0gSW5pdGlhbGl6ZSB0aGUgYFRvdWNoYWJsZWAgc3RhdGUuXG4gKlxuICogICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiBtZXJnZSh0aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLCB5b3VyQ29tcG9uZW50U3RhdGUpO1xuICogICB9XG4gKlxuICogLSBDaG9vc2UgdGhlIHJlbmRlcmVkIGNvbXBvbmVudCB3aG8ncyB0b3VjaGVzIHNob3VsZCBzdGFydCB0aGUgaW50ZXJhY3RpdmVcbiAqICAgc2VxdWVuY2UuIE9uIHRoYXQgcmVuZGVyZWQgbm9kZSwgZm9yd2FyZCBhbGwgYFRvdWNoYWJsZWAgcmVzcG9uZGVyXG4gKiAgIGhhbmRsZXJzLiBZb3UgY2FuIGNob29zZSBhbnkgcmVuZGVyZWQgbm9kZSB5b3UgbGlrZS4gQ2hvb3NlIGEgbm9kZSB3aG9zZVxuICogICBoaXQgdGFyZ2V0IHlvdSdkIGxpa2UgdG8gaW5zdGlnYXRlIHRoZSBpbnRlcmFjdGlvbiBzZXF1ZW5jZTpcbiAqXG4gKiAgIC8vIEluIHJlbmRlciBmdW5jdGlvbjpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8Vmlld1xuICogICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcj17dGhpcy50b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcn1cbiAqICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0PXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdH1cbiAqICAgICAgIG9uUmVzcG9uZGVyR3JhbnQ9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnR9XG4gKiAgICAgICBvblJlc3BvbmRlck1vdmU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZX1cbiAqICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlfVxuICogICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlfT5cbiAqICAgICAgIDxWaWV3PlxuICogICAgICAgICBFdmVuIHRob3VnaCB0aGUgaGl0IGRldGVjdGlvbi9pbnRlcmFjdGlvbnMgYXJlIHRyaWdnZXJlZCBieSB0aGVcbiAqICAgICAgICAgd3JhcHBpbmcgKHR5cGljYWxseSBsYXJnZXIpIG5vZGUsIHdlIHVzdWFsbHkgZW5kIHVwIGltcGxlbWVudGluZ1xuICogICAgICAgICBjdXN0b20gbG9naWMgdGhhdCBoaWdobGlnaHRzIHRoaXMgaW5uZXIgb25lLlxuICogICAgICAgPC9WaWV3PlxuICogICAgIDwvVmlldz5cbiAqICAgKTtcbiAqXG4gKiAtIFlvdSBtYXkgc2V0IHVwIHlvdXIgb3duIGhhbmRsZXJzIGZvciBlYWNoIG9mIHRoZXNlIGV2ZW50cywgc28gbG9uZyBhcyB5b3VcbiAqICAgYWxzbyBpbnZva2UgdGhlIGB0b3VjaGFibGUqYCBoYW5kbGVycyBpbnNpZGUgb2YgeW91ciBjdXN0b20gaGFuZGxlci5cbiAqXG4gKiAtIEltcGxlbWVudCB0aGUgaGFuZGxlcnMgb24geW91ciBjb21wb25lbnQgY2xhc3MgaW4gb3JkZXIgdG8gcHJvdmlkZVxuICogICBmZWVkYmFjayB0byB0aGUgdXNlci4gU2VlIGRvY3VtZW50YXRpb24gZm9yIGVhY2ggb2YgdGhlc2UgY2xhc3MgbWV0aG9kc1xuICogICB0aGF0IHlvdSBzaG91bGQgaW1wbGVtZW50LlxuICpcbiAqICAgdG91Y2hhYmxlSGFuZGxlUHJlc3M6IGZ1bmN0aW9uKCkge1xuICogICAgICB0aGlzLnBlcmZvcm1Cb3VuY2VBbmltYXRpb24oKTsgIC8vIG9yIHdoYXRldmVyIHlvdSB3YW50IHRvIGRvLlxuICogICB9LFxuICogICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbigpIHtcbiAqICAgICB0aGlzLmJlZ2luSGlnaGxpZ2h0aW5nKC4uLik7ICAvLyBXaGF0ZXZlciB5b3UgbGlrZSB0byBjb252ZXkgYWN0aXZhdGlvblxuICogICB9LFxuICogICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb24oKSB7XG4gKiAgICAgdGhpcy5lbmRIaWdobGlnaHRpbmcoLi4uKTsgIC8vIFdoYXRldmVyIHlvdSBsaWtlIHRvIGNvbnZleSBkZWFjdGl2YXRpb25cbiAqICAgfSxcbiAqXG4gKiAtIFRoZXJlIGFyZSBtb3JlIGFkdmFuY2VkIG1ldGhvZHMgeW91IGNhbiBpbXBsZW1lbnQgKHNlZSBkb2N1bWVudGF0aW9uIGJlbG93KTpcbiAqICAgdG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUzogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIDIwO1xuICogICB9XG4gKiAgIC8vIEluIHByYWN0aWNlLCAqYWx3YXlzKiB1c2UgYSBwcmVkZWNsYXJlZCBjb25zdGFudCAoY29uc2VydmUgbWVtb3J5KS5cbiAqICAgdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMTAwfTtcbiAqICAgfVxuICovXG5cbi8qKlxuICogVG91Y2hhYmxlIHN0YXRlcy5cbiAqL1xuY29uc3QgU3RhdGVzID0ga2V5TWlycm9yKHtcbiAgTk9UX1JFU1BPTkRFUjogbnVsbCwgLy8gTm90IHRoZSByZXNwb25kZXJcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOOiBudWxsLCAvLyBSZXNwb25kZXIsIGluYWN0aXZlLCBpbiB0aGUgYFByZXNzUmVjdGBcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVDogbnVsbCwgLy8gUmVzcG9uZGVyLCBpbmFjdGl2ZSwgb3V0IG9mIGBQcmVzc1JlY3RgXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IG51bGwsIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBpbiB0aGUgYFByZXNzUmVjdGBcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVQ6IG51bGwsIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBvdXQgb2YgYFByZXNzUmVjdGBcbiAgUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOOiBudWxsLCAvLyBSZXNwb25kZXIsIGFjdGl2ZSwgaW4gdGhlIGBQcmVzc1JlY3RgLCBhZnRlciBsb25nIHByZXNzIHRocmVzaG9sZFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VUOiBudWxsLCAvLyBSZXNwb25kZXIsIGFjdGl2ZSwgb3V0IG9mIGBQcmVzc1JlY3RgLCBhZnRlciBsb25nIHByZXNzIHRocmVzaG9sZFxuICBFUlJPUjogbnVsbCxcbn0pO1xuXG4vKipcbiAqIFF1aWNrIGxvb2t1cCBtYXAgZm9yIHN0YXRlcyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIFwiYWN0aXZlXCJcbiAqL1xuY29uc3QgSXNBY3RpdmUgPSB7XG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUOiB0cnVlLFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOOiB0cnVlLFxufTtcblxuLyoqXG4gKiBRdWljayBsb29rdXAgZm9yIHN0YXRlcyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIFwicHJlc3NpbmdcIiBhbmQgYXJlXG4gKiB0aGVyZWZvcmUgZWxpZ2libGUgdG8gcmVzdWx0IGluIGEgXCJzZWxlY3Rpb25cIiBpZiB0aGUgcHJlc3Mgc3RvcHMuXG4gKi9cbmNvbnN0IElzUHJlc3NpbmdJbiA9IHtcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOOiB0cnVlLFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOOiB0cnVlLFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IHRydWUsXG59O1xuXG5jb25zdCBJc0xvbmdQcmVzc2luZ0luID0ge1xuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IHRydWUsXG59O1xuXG4vKipcbiAqIElucHV0cyB0byB0aGUgc3RhdGUgbWFjaGluZS5cbiAqL1xuY29uc3QgU2lnbmFscyA9IGtleU1pcnJvcih7XG4gIERFTEFZOiBudWxsLFxuICBSRVNQT05ERVJfR1JBTlQ6IG51bGwsXG4gIFJFU1BPTkRFUl9SRUxFQVNFOiBudWxsLFxuICBSRVNQT05ERVJfVEVSTUlOQVRFRDogbnVsbCxcbiAgRU5URVJfUFJFU1NfUkVDVDogbnVsbCxcbiAgTEVBVkVfUFJFU1NfUkVDVDogbnVsbCxcbiAgTE9OR19QUkVTU19ERVRFQ1RFRDogbnVsbCxcbn0pO1xuXG4vKipcbiAqIE1hcHBpbmcgZnJvbSBTdGF0ZXMgeCBTaWduYWxzID0+IFN0YXRlc1xuICovXG5jb25zdCBUcmFuc2l0aW9ucyA9IHtcbiAgTk9UX1JFU1BPTkRFUjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5FUlJPUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuRVJST1IsXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLkVSUk9SLFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5FUlJPUixcbiAgfSxcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOOiB7XG4gICAgREVMQVk6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUOiB7XG4gICAgREVMQVk6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIGVycm9yOiB7XG4gICAgREVMQVk6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICB9LFxufTtcblxuLy8gPT09PSBUeXBpY2FsIENvbnN0YW50cyBmb3IgaW50ZWdyYXRpbmcgaW50byBVSSBjb21wb25lbnRzID09PT1cbi8vIHZhciBISVRfRVhQQU5EX1BYID0gMjA7XG4vLyB2YXIgSElUX1ZFUlRfT0ZGU0VUX1BYID0gMTA7XG5jb25zdCBISUdITElHSFRfREVMQVlfTVMgPSAxMzA7XG5cbmNvbnN0IFBSRVNTX0VYUEFORF9QWCA9IDIwO1xuXG5jb25zdCBMT05HX1BSRVNTX1RIUkVTSE9MRCA9IDUwMDtcblxuY29uc3QgTE9OR19QUkVTU19ERUxBWV9NUyA9IExPTkdfUFJFU1NfVEhSRVNIT0xEIC0gSElHSExJR0hUX0RFTEFZX01TO1xuXG5jb25zdCBMT05HX1BSRVNTX0FMTE9XRURfTU9WRU1FTlQgPSAxMDtcblxuLy8gRGVmYXVsdCBhbW91bnQgXCJhY3RpdmVcIiByZWdpb24gcHJvdHJ1ZGVzIGJleW9uZCBib3hcblxuLyoqXG4gKiBCeSBjb252ZW50aW9uLCBtZXRob2RzIHByZWZpeGVkIHdpdGggdW5kZXJzY29yZXMgYXJlIG1lYW50IHRvIGJlIEBwcml2YXRlLFxuICogYW5kIG5vdCBAcHJvdGVjdGVkLiBNaXhlcnMgc2hvdWxkbid0IGFjY2VzcyB0aGVtIC0gbm90IGV2ZW4gdG8gcHJvdmlkZSB0aGVtXG4gKiBhcyBjYWxsYmFjayBoYW5kbGVycy5cbiAqXG4gKlxuICogPT09PT09PT09PSBHZW9tZXRyeSA9PT09PT09PT1cbiAqIGBUb3VjaGFibGVgIG9ubHkgYXNzdW1lcyB0aGF0IHRoZXJlIGV4aXN0cyBhIGBIaXRSZWN0YCBub2RlLiBUaGUgYFByZXNzUmVjdGBcbiAqIGlzIGFuIGFic3RyYWN0IGJveCB0aGF0IGlzIGV4dGVuZGVkIGJleW9uZCB0aGUgYEhpdFJlY3RgLlxuICpcbiAqICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgfCAtIFwiU3RhcnRcIiBldmVudHMgaW4gYEhpdFJlY3RgIGNhdXNlIGBIaXRSZWN0YFxuICogIHwgICstLS0tLS0tLS0tLS0tLS0tLS0tLSsgIHwgICB0byBiZWNvbWUgdGhlIHJlc3BvbmRlci5cbiAqICB8ICB8ICArLS0tLS0tLS0tLS0tLS0rICB8ICB8IC0gYEhpdFJlY3RgIGlzIHR5cGljYWxseSBleHBhbmRlZCBhcm91bmRcbiAqICB8ICB8ICB8ICAgICAgICAgICAgICB8ICB8ICB8ICAgdGhlIGBWaXN1YWxSZWN0YCwgYnV0IHNoaWZ0ZWQgZG93bndhcmQuXG4gKiAgfCAgfCAgfCAgVmlzdWFsUmVjdCAgfCAgfCAgfCAtIEFmdGVyIHByZXNzaW5nIGRvd24sIGFmdGVyIHNvbWUgZGVsYXksXG4gKiAgfCAgfCAgfCAgICAgICAgICAgICAgfCAgfCAgfCAgIGFuZCBiZWZvcmUgbGV0dGluZyB1cCwgdGhlIFZpc3VhbCBSZWFjdFxuICogIHwgIHwgICstLS0tLS0tLS0tLS0tLSsgIHwgIHwgICB3aWxsIGJlY29tZSBcImFjdGl2ZVwiLiBUaGlzIG1ha2VzIGl0IGVsaWdpYmxlXG4gKiAgfCAgfCAgICAgSGl0UmVjdCAgICAgICAgfCAgfCAgIGZvciBiZWluZyBoaWdobGlnaHRlZCAoc28gbG9uZyBhcyB0aGVcbiAqICB8ICArLS0tLS0tLS0tLS0tLS0tLS0tLS0rICB8ICAgcHJlc3MgcmVtYWlucyBpbiB0aGUgYFByZXNzUmVjdGApLlxuICogIHwgICAgICAgIFByZXNzUmVjdCAgICAgbyAgIHxcbiAqICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0rXG4gKiAgICAgICAgICAgT3V0IFJlZ2lvbiAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0rIFRoaXMgZ2FwIGJldHdlZW4gdGhlIGBIaXRSZWN0YCBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFByZXNzUmVjdGAgYWxsb3dzIGEgdG91Y2ggdG8gbW92ZSBmYXIgYXdheVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIHRoZSBvcmlnaW5hbCBoaXQgcmVjdCwgYW5kIHJlbWFpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZCwgYW5kIGVsaWdpYmxlIGZvciBhIFwiUHJlc3NcIi5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3VzdG9taXplIHRoaXMgdmlhXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQoKWAuXG4gKlxuICpcbiAqXG4gKiA9PT09PT09IFN0YXRlIE1hY2hpbmUgPT09PT09PVxuICpcbiAqICstLS0tLS0tLS0tLS0tKyA8LS0tKyBSRVNQT05ERVJfUkVMRUFTRVxuICogfE5PVF9SRVNQT05ERVJ8XG4gKiArLS0tLS0tLS0tLS0tLSsgPC0tLSsgUkVTUE9OREVSX1RFUk1JTkFURURcbiAqICAgICArXG4gKiAgICAgfCBSRVNQT05ERVJfR1JBTlQgKEhpdFJlY3QpXG4gKiAgICAgdlxuICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIERFTEFZICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICBUICsgREVMQVkgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiB8UkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOfCstLS0tLS0tLT58UkVTUE9OREVSX0FDVElWRV9QUkVTU19JTnwgKy0tLS0tLS0tLS0tLT4gfFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTnxcbiAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogICAgICsgICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgICAgICsgICAgICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICAgICAgICAgICBeXG4gKiAgICAgfExFQVZFXyAgICAgIHxFTlRFUl8gICAgICAgICAgICAgICAgICAgfExFQVZFXyAgICAgfEVOVEVSXyAgICAgICAgICAgICAgICAgICAgICAgICAgIHxMRUFWRV8gICAgIHxFTlRFUl9cbiAqICAgICB8UFJFU1NfUkVDVCAgfFBSRVNTX1JFQ1QgICAgICAgICAgICAgICB8UFJFU1NfUkVDVCB8UFJFU1NfUkVDVCAgICAgICAgICAgICAgICAgICAgICAgfFBSRVNTX1JFQ1QgfFBSRVNTX1JFQ1RcbiAqICAgICB8ICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgfFxuICogICAgIHYgICAgICAgICAgICArICAgICAgICAgICAgICAgICAgICAgICAgIHYgICAgICAgICAgICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICAgICAgICAgICArXG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIERFTEFZICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiB8UkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVHwrLS0tLS0tLT58UkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVR8ICAgICAgICAgICAgICAgfFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVR8XG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKlxuICogVCArIERFTEFZID0+IExPTkdfUFJFU1NfREVMQVlfTVMgKyBERUxBWVxuICpcbiAqIE5vdCBkcmF3biBhcmUgdGhlIHNpZGUgZWZmZWN0cyBvZiBlYWNoIHRyYW5zaXRpb24uIFRoZSBtb3N0IGltcG9ydGFudCBzaWRlXG4gKiBlZmZlY3QgaXMgdGhlIGB0b3VjaGFibGVIYW5kbGVQcmVzc2AgYWJzdHJhY3QgbWV0aG9kIGludm9jYXRpb24gdGhhdCBvY2N1cnNcbiAqIHdoZW4gYSByZXNwb25kZXIgaXMgcmVsZWFzZWQgd2hpbGUgaW4gZWl0aGVyIG9mIHRoZSBcIlByZXNzXCIgc3RhdGVzLlxuICpcbiAqIFRoZSBvdGhlciBpbXBvcnRhbnQgc2lkZSBlZmZlY3RzIGFyZSB0aGUgaGlnaGxpZ2h0IGFic3RyYWN0IG1ldGhvZFxuICogaW52b2NhdGlvbnMgKGludGVybmFsIGNhbGxiYWNrcykgdG8gYmUgaW1wbGVtZW50ZWQgYnkgdGhlIG1peGVyLlxuICpcbiAqXG4gKiBAbGVuZHMgVG91Y2hhYmxlLnByb3RvdHlwZVxuICovXG5jb25zdCBUb3VjaGFibGVNaXhpbiA9IHtcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghUGxhdGZvcm0uaXNUVikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3R2RXZlbnRIYW5kbGVyID0gbmV3IFRWRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5fdHZFdmVudEhhbmRsZXIuZW5hYmxlKHRoaXMsIGZ1bmN0aW9uKGNtcCwgZXZ0KSB7XG4gICAgICBjb25zdCBteVRhZyA9IFJlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKGNtcCk7XG4gICAgICBldnQuZGlzcGF0Y2hDb25maWcgPSB7fTtcbiAgICAgIGlmIChteVRhZyA9PT0gZXZ0LnRhZykge1xuICAgICAgICBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVGb2N1cyhldnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2dC5ldmVudFR5cGUgPT09ICdibHVyJykge1xuICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVCbHVyKGV2dCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgICBjbXAudG91Y2hhYmxlSGFuZGxlUHJlc3MgJiZcbiAgICAgICAgICAgICFjbXAucHJvcHMuZGlzYWJsZWQgJiZcbiAgICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVQcmVzcyhldnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCB0aW1lb3V0cyBvbiB1bm1vdW50XG4gICAqL1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3R2RXZlbnRIYW5kbGVyKSB7XG4gICAgICB0aGlzLl90dkV2ZW50SGFuZGxlci5kaXNhYmxlKCk7XG4gICAgICBkZWxldGUgdGhpcy5fdHZFdmVudEhhbmRsZXI7XG4gICAgfVxuICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCk7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0KTtcbiAgfSxcblxuICAvKipcbiAgICogSXQncyBwcmVmZXIgdGhhdCBtaXhpbnMgZGV0ZXJtaW5lIHN0YXRlIGluIHRoaXMgd2F5LCBoYXZpbmcgdGhlIGNsYXNzXG4gICAqIGV4cGxpY2l0bHkgbWl4IHRoZSBzdGF0ZSBpbiB0aGUgb25lIGFuZCBvbmx5IGBnZXRJbml0aWFsU3RhdGVgIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fSBTdGF0ZSBvYmplY3QgdG8gYmUgcGxhY2VkIGluc2lkZSBvZlxuICAgKiBgdGhpcy5zdGF0ZS50b3VjaGFibGVgLlxuICAgKi9cbiAgdG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG91Y2hhYmxlOiB7dG91Y2hTdGF0ZTogdW5kZWZpbmVkLCByZXNwb25kZXJJRDogbnVsbH0sXG4gICAgfTtcbiAgfSxcblxuICAvLyA9PT09IEhvb2tzIHRvIEdlc3R1cmUgUmVzcG9uZGVyIHN5c3RlbSA9PT09XG4gIC8qKlxuICAgKiBNdXN0IHJldHVybiB0cnVlIGlmIGVtYmVkZGVkIGluIGEgbmF0aXZlIHBsYXRmb3JtIHNjcm9sbCB2aWV3LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMucmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb247XG4gIH0sXG5cbiAgLyoqXG4gICAqIE11c3QgcmV0dXJuIHRydWUgdG8gc3RhcnQgdGhlIHByb2Nlc3Mgb2YgYFRvdWNoYWJsZWAuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICF0aGlzLnByb3BzLmRpc2FibGVkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdHJ1ZSB0byBjYW5jZWwgcHJlc3Mgb24gbG9uZyBwcmVzcy5cbiAgICovXG4gIHRvdWNoYWJsZUxvbmdQcmVzc0NhbmNlbHNQcmVzczogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyR3JhbnRgIGV2ZW50LlxuICAgKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBlIFN5bnRoZXRpYyBldmVudCBmcm9tIGV2ZW50IHN5c3RlbS5cbiAgICpcbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50OiBmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgZGlzcGF0Y2hJRCA9IGUuY3VycmVudFRhcmdldDtcbiAgICAvLyBTaW5jZSBlIGlzIHVzZWQgaW4gYSBjYWxsYmFjayBpbnZva2VkIG9uIGFub3RoZXIgZXZlbnQgbG9vcFxuICAgIC8vIChhcyBpbiBzZXRUaW1lb3V0IGV0YyksIHdlIG5lZWQgdG8gY2FsbCBlLnBlcnNpc3QoKSBvbiB0aGVcbiAgICAvLyBldmVudCB0byBtYWtlIHN1cmUgaXQgZG9lc24ndCBnZXQgcmV1c2VkIGluIHRoZSBldmVudCBvYmplY3QgcG9vbC5cbiAgICBlLnBlcnNpc3QoKTtcblxuICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQpO1xuICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgPSBudWxsO1xuXG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9IFN0YXRlcy5OT1RfUkVTUE9OREVSO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnJlc3BvbmRlcklEID0gZGlzcGF0Y2hJRDtcbiAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuUkVTUE9OREVSX0dSQU5ULCBlKTtcbiAgICBsZXQgZGVsYXlNUyA9XG4gICAgICB0aGlzLnRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVMgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IE1hdGgubWF4KHRoaXMudG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUygpLCAwKVxuICAgICAgICA6IEhJR0hMSUdIVF9ERUxBWV9NUztcbiAgICBkZWxheU1TID0gaXNOYU4oZGVsYXlNUykgPyBISUdITElHSFRfREVMQVlfTVMgOiBkZWxheU1TO1xuICAgIGlmIChkZWxheU1TICE9PSAwKSB7XG4gICAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGF5LmJpbmQodGhpcywgZSksXG4gICAgICAgIGRlbGF5TVMsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxheShlKTtcbiAgICB9XG5cbiAgICBsZXQgbG9uZ0RlbGF5TVMgPVxuICAgICAgdGhpcy50b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBNYXRoLm1heCh0aGlzLnRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMoKSwgMTApXG4gICAgICAgIDogTE9OR19QUkVTU19ERUxBWV9NUztcbiAgICBsb25nRGVsYXlNUyA9IGlzTmFOKGxvbmdEZWxheU1TKSA/IExPTkdfUFJFU1NfREVMQVlfTVMgOiBsb25nRGVsYXlNUztcbiAgICB0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICB0aGlzLl9oYW5kbGVMb25nRGVsYXkuYmluZCh0aGlzLCBlKSxcbiAgICAgIGxvbmdEZWxheU1TICsgZGVsYXlNUyxcbiAgICApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlclJlbGVhc2VgIGV2ZW50LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZTogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRSwgZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyVGVybWluYXRlYCBldmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZTogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5SRVNQT05ERVJfVEVSTUlOQVRFRCwgZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyTW92ZWAgZXZlbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlOiBmdW5jdGlvbihlKSB7XG4gICAgLy8gTm90IGVub3VnaCB0aW1lIGVsYXBzZWQgeWV0LCB3YWl0IGZvciBoaWdobGlnaHQgLVxuICAgIC8vIHRoaXMgaXMganVzdCBhIHBlcmYgb3B0aW1pemF0aW9uLlxuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGUgPT09IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU5cbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBNZWFzdXJlbWVudCBtYXkgbm90IGhhdmUgcmV0dXJuZWQgeWV0LlxuICAgIGlmICghdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9zaXRpb25PbkFjdGl2YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlO1xuICAgIGNvbnN0IGRpbWVuc2lvbnNPbkFjdGl2YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUuZGltZW5zaW9uc09uQWN0aXZhdGU7XG4gICAgY29uc3QgcHJlc3NSZWN0T2Zmc2V0ID0gdGhpcy50b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXRcbiAgICAgID8gdGhpcy50b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQoKVxuICAgICAgOiB7XG4gICAgICAgICAgbGVmdDogUFJFU1NfRVhQQU5EX1BYLFxuICAgICAgICAgIHJpZ2h0OiBQUkVTU19FWFBBTkRfUFgsXG4gICAgICAgICAgdG9wOiBQUkVTU19FWFBBTkRfUFgsXG4gICAgICAgICAgYm90dG9tOiBQUkVTU19FWFBBTkRfUFgsXG4gICAgICAgIH07XG5cbiAgICBsZXQgcHJlc3NFeHBhbmRMZWZ0ID0gcHJlc3NSZWN0T2Zmc2V0LmxlZnQ7XG4gICAgbGV0IHByZXNzRXhwYW5kVG9wID0gcHJlc3NSZWN0T2Zmc2V0LnRvcDtcbiAgICBsZXQgcHJlc3NFeHBhbmRSaWdodCA9IHByZXNzUmVjdE9mZnNldC5yaWdodDtcbiAgICBsZXQgcHJlc3NFeHBhbmRCb3R0b20gPSBwcmVzc1JlY3RPZmZzZXQuYm90dG9tO1xuXG4gICAgY29uc3QgaGl0U2xvcCA9IHRoaXMudG91Y2hhYmxlR2V0SGl0U2xvcFxuICAgICAgPyB0aGlzLnRvdWNoYWJsZUdldEhpdFNsb3AoKVxuICAgICAgOiBudWxsO1xuXG4gICAgaWYgKGhpdFNsb3ApIHtcbiAgICAgIHByZXNzRXhwYW5kTGVmdCArPSBoaXRTbG9wLmxlZnQ7XG4gICAgICBwcmVzc0V4cGFuZFRvcCArPSBoaXRTbG9wLnRvcDtcbiAgICAgIHByZXNzRXhwYW5kUmlnaHQgKz0gaGl0U2xvcC5yaWdodDtcbiAgICAgIHByZXNzRXhwYW5kQm90dG9tICs9IGhpdFNsb3AuYm90dG9tO1xuICAgIH1cblxuICAgIGNvbnN0IHRvdWNoID0gVG91Y2hFdmVudFV0aWxzLmV4dHJhY3RTaW5nbGVUb3VjaChlLm5hdGl2ZUV2ZW50KTtcbiAgICBjb25zdCBwYWdlWCA9IHRvdWNoICYmIHRvdWNoLnBhZ2VYO1xuICAgIGNvbnN0IHBhZ2VZID0gdG91Y2ggJiYgdG91Y2gucGFnZVk7XG5cbiAgICBpZiAodGhpcy5wcmVzc0luTG9jYXRpb24pIHtcbiAgICAgIGNvbnN0IG1vdmVkRGlzdGFuY2UgPSB0aGlzLl9nZXREaXN0YW5jZUJldHdlZW5Qb2ludHMoXG4gICAgICAgIHBhZ2VYLFxuICAgICAgICBwYWdlWSxcbiAgICAgICAgdGhpcy5wcmVzc0luTG9jYXRpb24ucGFnZVgsXG4gICAgICAgIHRoaXMucHJlc3NJbkxvY2F0aW9uLnBhZ2VZLFxuICAgICAgKTtcbiAgICAgIGlmIChtb3ZlZERpc3RhbmNlID4gTE9OR19QUkVTU19BTExPV0VEX01PVkVNRU5UKSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlzVG91Y2hXaXRoaW5BY3RpdmUgPVxuICAgICAgcGFnZVggPiBwb3NpdGlvbk9uQWN0aXZhdGUubGVmdCAtIHByZXNzRXhwYW5kTGVmdCAmJlxuICAgICAgcGFnZVkgPiBwb3NpdGlvbk9uQWN0aXZhdGUudG9wIC0gcHJlc3NFeHBhbmRUb3AgJiZcbiAgICAgIHBhZ2VYIDxcbiAgICAgICAgcG9zaXRpb25PbkFjdGl2YXRlLmxlZnQgK1xuICAgICAgICAgIGRpbWVuc2lvbnNPbkFjdGl2YXRlLndpZHRoICtcbiAgICAgICAgICBwcmVzc0V4cGFuZFJpZ2h0ICYmXG4gICAgICBwYWdlWSA8XG4gICAgICAgIHBvc2l0aW9uT25BY3RpdmF0ZS50b3AgK1xuICAgICAgICAgIGRpbWVuc2lvbnNPbkFjdGl2YXRlLmhlaWdodCArXG4gICAgICAgICAgcHJlc3NFeHBhbmRCb3R0b207XG4gICAgaWYgKGlzVG91Y2hXaXRoaW5BY3RpdmUpIHtcbiAgICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5FTlRFUl9QUkVTU19SRUNULCBlKTtcbiAgICAgIGNvbnN0IGN1clN0YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZTtcbiAgICAgIGlmIChjdXJTdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTikge1xuICAgICAgICAvLyBmaXggZm9yIHQ3OTY3NDIwXG4gICAgICAgIHRoaXMuX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQoKTtcbiAgICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5MRUFWRV9QUkVTU19SRUNULCBlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSByZWNlaXZlcyBmb2N1cy4gTWl4ZXJzIG1pZ2h0IG92ZXJyaWRlIHRoaXMgdG9cbiAgICogdmlzdWFsbHkgZGlzdGluZ3Vpc2ggdGhlIGBWaXN1YWxSZWN0YCBzbyB0aGF0IHRoZSB1c2VyIGtub3dzIHRoYXQgaXRcbiAgICogY3VycmVudGx5IGhhcyB0aGUgZm9jdXMuIE1vc3QgcGxhdGZvcm1zIG9ubHkgc3VwcG9ydCBhIHNpbmdsZSBlbGVtZW50IGJlaW5nXG4gICAqIGZvY3VzZWQgYXQgYSB0aW1lLCBpbiB3aGljaCBjYXNlIHRoZXJlIG1heSBoYXZlIGJlZW4gYSBwcmV2aW91c2x5IGZvY3VzZWRcbiAgICogZWxlbWVudCB0aGF0IHdhcyBibHVycmVkIGp1c3QgcHJpb3IgdG8gdGhpcy5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZUZvY3VzOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25Gb2N1cyAmJiB0aGlzLnByb3BzLm9uRm9jdXMoZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBsb3NlcyBmb2N1cy4gTWl4ZXJzIG1pZ2h0IG92ZXJyaWRlIHRoaXMgdG9cbiAgICogdmlzdWFsbHkgZGlzdGluZ3Vpc2ggdGhlIGBWaXN1YWxSZWN0YCBzbyB0aGF0IHRoZSB1c2VyIGtub3dzIHRoYXQgaXRcbiAgICogbm8gbG9uZ2VyIGhhcyBmb2N1cy4gTW9zdCBwbGF0Zm9ybXMgb25seSBzdXBwb3J0IGEgc2luZ2xlIGVsZW1lbnQgYmVpbmdcbiAgICogZm9jdXNlZCBhdCBhIHRpbWUsIGluIHdoaWNoIGNhc2UgdGhlIGZvY3VzIG1heSBoYXZlIG1vdmVkIHRvIGFub3RoZXIuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVCbHVyOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25CbHVyICYmIHRoaXMucHJvcHMub25CbHVyKGUpO1xuICB9LFxuXG4gIC8vID09PT0gQWJzdHJhY3QgQXBwbGljYXRpb24gQ2FsbGJhY2tzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIHNob3VsZCBiZSBoaWdobGlnaHRlZC4gTWl4ZXJzIHNob3VsZCBpbXBsZW1lbnQgdGhpc1xuICAgKiB0byB2aXN1YWxseSBkaXN0aW5ndWlzaCB0aGUgYFZpc3VhbFJlY3RgIHNvIHRoYXQgdGhlIHVzZXIga25vd3MgdGhhdFxuICAgKiByZWxlYXNpbmcgYSB0b3VjaCB3aWxsIHJlc3VsdCBpbiBhIFwic2VsZWN0aW9uXCIgKGFuYWxvZyB0byBjbGljaykuXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbixcbiAgICovXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBpcyBcImFjdGl2ZVwiIChpbiB0aGF0IGl0IGlzIHN0aWxsIGVsaWdpYmxlIHRvIGJlY29tZVxuICAgKiBhIFwic2VsZWN0XCIpIGJ1dCB0aGUgdG91Y2ggaGFzIGxlZnQgdGhlIGBQcmVzc1JlY3RgLiBVc3VhbGx5IHRoZSBtaXhlciB3aWxsXG4gICAqIHdhbnQgdG8gdW5oaWdobGlnaHQgdGhlIGBWaXN1YWxSZWN0YC4gSWYgdGhlIHVzZXIgKHdoaWxlIHByZXNzaW5nKSBtb3Zlc1xuICAgKiBiYWNrIGludG8gdGhlIGBQcmVzc1JlY3RgIGB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luYCB3aWxsIGJlIGludm9rZWRcbiAgICogYWdhaW4gYW5kIHRoZSBtaXhlciBzaG91bGQgcHJvYmFibHkgaGlnaGxpZ2h0IHRoZSBgVmlzdWFsUmVjdGAgYWdhaW4uIFRoaXNcbiAgICogZXZlbnQgd2lsbCBub3QgZmlyZSBvbiBhbiBgdG91Y2hFbmQvbW91c2VVcGAgZXZlbnQsIG9ubHkgbW92ZSBldmVudHMgd2hpbGVcbiAgICogdGhlIHVzZXIgaXMgZGVwcmVzc2luZyB0aGUgbW91c2UvdG91Y2guXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBpcyBcInNlbGVjdGVkXCIgLSBtZWFuaW5nIHRoZSBpbnRlcmFjdGlvbiBlbmRlZCBieVxuICAgKiBsZXR0aW5nIHVwIHdoaWxlIHRoZSBpdGVtIHdhcyBlaXRoZXIgaW4gdGhlIHN0YXRlXG4gICAqIGBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOYCBvciBgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOYC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvblxuICAgKi9cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIGlzIGxvbmcgcHJlc3NlZCAtIG1lYW5pbmcgdGhlIGludGVyYWN0aW9uIGVuZGVkIGJ5XG4gICAqIGxldHRpbmcgdXAgd2hpbGUgdGhlIGl0ZW0gd2FzIGluIGBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU5gLiBJZlxuICAgKiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBpcyAqbm90KiBwcm92aWRlZCwgYHRvdWNoYWJsZUhhbmRsZVByZXNzYCB3aWxsXG4gICAqIGJlIGNhbGxlZCBhcyBpdCBub3JtYWxseSBpcy4gSWYgYHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzc2AgaXMgcHJvdmlkZWQsIGJ5XG4gICAqIGRlZmF1bHQgYW55IGB0b3VjaGFibGVIYW5kbGVQcmVzc2AgY2FsbGJhY2sgd2lsbCBub3QgYmUgaW52b2tlZC4gVG9cbiAgICogb3ZlcnJpZGUgdGhpcyBkZWZhdWx0IGJlaGF2aW9yLCBvdmVycmlkZSBgdG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzYFxuICAgKiB0byByZXR1cm4gZmFsc2UuIEFzIGEgcmVzdWx0LCBgdG91Y2hhYmxlSGFuZGxlUHJlc3NgIHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAgICogbGlmdGluZyB1cCwgZXZlbiBpZiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBoYXMgYWxzbyBiZWVuIGNhbGxlZC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzczogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXMgdG8gd2FpdCBiZWZvcmUgdHJpZ2dlcmluZyBhIGhpZ2hsaWdodC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVM6IGZ1bmN0aW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhbW91bnQgdG8gZXh0ZW5kIHRoZSBgSGl0UmVjdGAgaW50byB0aGUgYFByZXNzUmVjdGAuIFBvc2l0aXZlXG4gICAqIG51bWJlcnMgbWVhbiB0aGUgc2l6ZSBleHBhbmRzIG91dHdhcmRzLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvblxuICAgKi9cblxuICAvLyA9PT09IEludGVybmFsIExvZ2ljID09PT1cblxuICAvKipcbiAgICogTWVhc3VyZXMgdGhlIGBIaXRSZWN0YCBub2RlIG9uIGFjdGl2YXRpb24uIFRoZSBCb3VuZGluZyByZWN0YW5nbGUgaXMgd2l0aFxuICAgKiByZXNwZWN0IHRvIHZpZXdwb3J0IC0gbm90IHBhZ2UsIHNvIGFkZGluZyB0aGUgYHBhZ2VYT2Zmc2V0L3BhZ2VZT2Zmc2V0YFxuICAgKiBzaG91bGQgcmVzdWx0IGluIHBvaW50cyB0aGF0IGFyZSBpbiB0aGUgc2FtZSBjb29yZGluYXRlIHN5c3RlbSBhcyBhblxuICAgKiBldmVudCdzIGBnbG9iYWxYL2dsb2JhbFlgIGRhdGEgdmFsdWVzLlxuICAgKlxuICAgKiAtIENvbnNpZGVyIGNhY2hpbmcgdGhpcyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBjb21wb25lbnQsIG9yIHBvc3NpYmx5XG4gICAqICAgYmVpbmcgYWJsZSB0byBzaGFyZSB0aGlzIGNhY2hlIGJldHdlZW4gYW55IGBTY3JvbGxNYXBgIHZpZXcuXG4gICAqXG4gICAqIEBzaWRlZWZmZWN0c1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbWVhc3VyZU1ldHJpY3NPbkFjdGl2YXRpb246IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHRhZyA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnJlc3BvbmRlcklEO1xuICAgIGlmICh0YWcgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIFVJTWFuYWdlci5tZWFzdXJlKHRhZywgdGhpcy5faGFuZGxlUXVlcnlMYXlvdXQpO1xuICB9LFxuXG4gIF9oYW5kbGVRdWVyeUxheW91dDogZnVuY3Rpb24obCwgdCwgdywgaCwgZ2xvYmFsWCwgZ2xvYmFsWSkge1xuICAgIC8vZG9uJ3QgZG8gYW55dGhpbmcgVUlNYW5hZ2VyIGZhaWxlZCB0byBtZWFzdXJlIG5vZGVcbiAgICBpZiAoIWwgJiYgIXQgJiYgIXcgJiYgIWggJiYgIWdsb2JhbFggJiYgIWdsb2JhbFkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlICYmXG4gICAgICBQb3NpdGlvbi5yZWxlYXNlKHRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZSk7XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUuZGltZW5zaW9uc09uQWN0aXZhdGUgJiZcbiAgICAgIEJvdW5kaW5nRGltZW5zaW9ucy5yZWxlYXNlKHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlKTtcbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUgPSBQb3NpdGlvbi5nZXRQb29sZWQoXG4gICAgICBnbG9iYWxYLFxuICAgICAgZ2xvYmFsWSxcbiAgICApO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlID0gQm91bmRpbmdEaW1lbnNpb25zLmdldFBvb2xlZChcbiAgICAgIHcsXG4gICAgICBoLFxuICAgICk7XG4gIH0sXG5cbiAgX2hhbmRsZURlbGF5OiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5ERUxBWSwgZSk7XG4gIH0sXG5cbiAgX2hhbmRsZUxvbmdEZWxheTogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ID0gbnVsbDtcbiAgICBjb25zdCBjdXJTdGF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGU7XG4gICAgaWYgKFxuICAgICAgY3VyU3RhdGUgIT09IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOICYmXG4gICAgICBjdXJTdGF0ZSAhPT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTlxuICAgICkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ0F0dGVtcHRlZCB0byB0cmFuc2l0aW9uIGZyb20gc3RhdGUgYCcgK1xuICAgICAgICAgIGN1clN0YXRlICtcbiAgICAgICAgICAnYCB0byBgJyArXG4gICAgICAgICAgU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTiArXG4gICAgICAgICAgJ2AsIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIFRoaXMgaXMgJyArXG4gICAgICAgICAgJ21vc3QgbGlrZWx5IGR1ZSB0byBgVG91Y2hhYmxlLmxvbmdQcmVzc0RlbGF5VGltZW91dGAgbm90IGJlaW5nIGNhbmNlbGxlZC4nLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkxPTkdfUFJFU1NfREVURUNURUQsIGUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjZWl2ZXMgYSBzdGF0ZSBtYWNoaW5lIHNpZ25hbCwgcGVyZm9ybXMgc2lkZSBlZmZlY3RzIG9mIHRoZSB0cmFuc2l0aW9uXG4gICAqIGFuZCBzdG9yZXMgdGhlIG5ldyBzdGF0ZS4gVmFsaWRhdGVzIHRoZSB0cmFuc2l0aW9uIGFzIHdlbGwuXG4gICAqXG4gICAqIEBwYXJhbSB7U2lnbmFsc30gc2lnbmFsIFN0YXRlIG1hY2hpbmUgc2lnbmFsLlxuICAgKiBAdGhyb3dzIEVycm9yIGlmIGludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBvciB1bnJlY29nbml6ZWQgc2lnbmFsLlxuICAgKiBAc2lkZWVmZmVjdHNcbiAgICovXG4gIF9yZWNlaXZlU2lnbmFsOiBmdW5jdGlvbihzaWduYWwsIGUpIHtcbiAgICBjb25zdCByZXNwb25kZXJJRCA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnJlc3BvbmRlcklEO1xuICAgIGNvbnN0IGN1clN0YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZTtcbiAgICBjb25zdCBuZXh0U3RhdGUgPSBUcmFuc2l0aW9uc1tjdXJTdGF0ZV0gJiYgVHJhbnNpdGlvbnNbY3VyU3RhdGVdW3NpZ25hbF07XG4gICAgaWYgKCFyZXNwb25kZXJJRCAmJiBzaWduYWwgPT09IFNpZ25hbHMuUkVTUE9OREVSX1JFTEVBU0UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFuZXh0U3RhdGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1VucmVjb2duaXplZCBzaWduYWwgYCcgK1xuICAgICAgICAgIHNpZ25hbCArXG4gICAgICAgICAgJ2Agb3Igc3RhdGUgYCcgK1xuICAgICAgICAgIGN1clN0YXRlICtcbiAgICAgICAgICAnYCBmb3IgVG91Y2hhYmxlIHJlc3BvbmRlciBgJyArXG4gICAgICAgICAgcmVzcG9uZGVySUQgK1xuICAgICAgICAgICdgJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChuZXh0U3RhdGUgPT09IFN0YXRlcy5FUlJPUikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVG91Y2hhYmxlIGNhbm5vdCB0cmFuc2l0aW9uIGZyb20gYCcgK1xuICAgICAgICAgIGN1clN0YXRlICtcbiAgICAgICAgICAnYCB0byBgJyArXG4gICAgICAgICAgc2lnbmFsICtcbiAgICAgICAgICAnYCBmb3IgcmVzcG9uZGVyIGAnICtcbiAgICAgICAgICByZXNwb25kZXJJRCArXG4gICAgICAgICAgJ2AnLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGN1clN0YXRlICE9PSBuZXh0U3RhdGUpIHtcbiAgICAgIHRoaXMuX3BlcmZvcm1TaWRlRWZmZWN0c0ZvclRyYW5zaXRpb24oY3VyU3RhdGUsIG5leHRTdGF0ZSwgc2lnbmFsLCBlKTtcbiAgICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgfVxuICB9LFxuXG4gIF9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCk7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgPSBudWxsO1xuICB9LFxuXG4gIF9pc0hpZ2hsaWdodDogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgc3RhdGUgPT09IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOIHx8XG4gICAgICBzdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTlxuICAgICk7XG4gIH0sXG5cbiAgX3NhdmVQcmVzc0luTG9jYXRpb246IGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCB0b3VjaCA9IFRvdWNoRXZlbnRVdGlscy5leHRyYWN0U2luZ2xlVG91Y2goZS5uYXRpdmVFdmVudCk7XG4gICAgY29uc3QgcGFnZVggPSB0b3VjaCAmJiB0b3VjaC5wYWdlWDtcbiAgICBjb25zdCBwYWdlWSA9IHRvdWNoICYmIHRvdWNoLnBhZ2VZO1xuICAgIGNvbnN0IGxvY2F0aW9uWCA9IHRvdWNoICYmIHRvdWNoLmxvY2F0aW9uWDtcbiAgICBjb25zdCBsb2NhdGlvblkgPSB0b3VjaCAmJiB0b3VjaC5sb2NhdGlvblk7XG4gICAgdGhpcy5wcmVzc0luTG9jYXRpb24gPSB7cGFnZVgsIHBhZ2VZLCBsb2NhdGlvblgsIGxvY2F0aW9uWX07XG4gIH0sXG5cbiAgX2dldERpc3RhbmNlQmV0d2VlblBvaW50czogZnVuY3Rpb24oYVgsIGFZLCBiWCwgYlkpIHtcbiAgICBjb25zdCBkZWx0YVggPSBhWCAtIGJYO1xuICAgIGNvbnN0IGRlbHRhWSA9IGFZIC0gYlk7XG4gICAgcmV0dXJuIE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBXaWxsIHBlcmZvcm0gYSB0cmFuc2l0aW9uIGJldHdlZW4gdG91Y2hhYmxlIHN0YXRlcywgYW5kIGlkZW50aWZ5IGFueVxuICAgKiBoaWdobGlnaHRpbmcgb3IgdW5oaWdobGlnaHRpbmcgdGhhdCBtdXN0IGJlIHBlcmZvcm1lZCBmb3IgdGhpcyBwYXJ0aWN1bGFyXG4gICAqIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RhdGVzfSBjdXJTdGF0ZSBDdXJyZW50IFRvdWNoYWJsZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtTdGF0ZXN9IG5leHRTdGF0ZSBOZXh0IFRvdWNoYWJsZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtTaWduYWx9IHNpZ25hbCBTaWduYWwgdGhhdCB0cmlnZ2VyZWQgdGhlIHRyYW5zaXRpb24uXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgTmF0aXZlIGV2ZW50LlxuICAgKiBAc2lkZWVmZmVjdHNcbiAgICovXG4gIF9wZXJmb3JtU2lkZUVmZmVjdHNGb3JUcmFuc2l0aW9uOiBmdW5jdGlvbihjdXJTdGF0ZSwgbmV4dFN0YXRlLCBzaWduYWwsIGUpIHtcbiAgICBjb25zdCBjdXJJc0hpZ2hsaWdodCA9IHRoaXMuX2lzSGlnaGxpZ2h0KGN1clN0YXRlKTtcbiAgICBjb25zdCBuZXdJc0hpZ2hsaWdodCA9IHRoaXMuX2lzSGlnaGxpZ2h0KG5leHRTdGF0ZSk7XG5cbiAgICBjb25zdCBpc0ZpbmFsU2lnbmFsID1cbiAgICAgIHNpZ25hbCA9PT0gU2lnbmFscy5SRVNQT05ERVJfVEVSTUlOQVRFRCB8fFxuICAgICAgc2lnbmFsID09PSBTaWduYWxzLlJFU1BPTkRFUl9SRUxFQVNFO1xuXG4gICAgaWYgKGlzRmluYWxTaWduYWwpIHtcbiAgICAgIHRoaXMuX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCgpO1xuICAgIH1cblxuICAgIGlmICghSXNBY3RpdmVbY3VyU3RhdGVdICYmIElzQWN0aXZlW25leHRTdGF0ZV0pIHtcbiAgICAgIHRoaXMuX3JlbWVhc3VyZU1ldHJpY3NPbkFjdGl2YXRpb24oKTtcbiAgICB9XG5cbiAgICBpZiAoSXNQcmVzc2luZ0luW2N1clN0YXRlXSAmJiBzaWduYWwgPT09IFNpZ25hbHMuTE9OR19QUkVTU19ERVRFQ1RFRCkge1xuICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVMb25nUHJlc3MgJiYgdGhpcy50b3VjaGFibGVIYW5kbGVMb25nUHJlc3MoZSk7XG4gICAgfVxuXG4gICAgaWYgKG5ld0lzSGlnaGxpZ2h0ICYmICFjdXJJc0hpZ2hsaWdodCkge1xuICAgICAgdGhpcy5fc3RhcnRIaWdobGlnaHQoZSk7XG4gICAgfSBlbHNlIGlmICghbmV3SXNIaWdobGlnaHQgJiYgY3VySXNIaWdobGlnaHQpIHtcbiAgICAgIHRoaXMuX2VuZEhpZ2hsaWdodChlKTtcbiAgICB9XG5cbiAgICBpZiAoSXNQcmVzc2luZ0luW2N1clN0YXRlXSAmJiBzaWduYWwgPT09IFNpZ25hbHMuUkVTUE9OREVSX1JFTEVBU0UpIHtcbiAgICAgIGNvbnN0IGhhc0xvbmdQcmVzc0hhbmRsZXIgPSAhIXRoaXMucHJvcHMub25Mb25nUHJlc3M7XG4gICAgICBjb25zdCBwcmVzc0lzTG9uZ0J1dFN0aWxsQ2FsbE9uUHJlc3MgPVxuICAgICAgICBJc0xvbmdQcmVzc2luZ0luW2N1clN0YXRlXSAmJiAvLyBXZSAqYXJlKiBsb25nIHByZXNzaW5nLi4gLy8gQnV0IGVpdGhlciBoYXMgbm8gbG9uZyBoYW5kbGVyXG4gICAgICAgICghaGFzTG9uZ1ByZXNzSGFuZGxlciB8fCAhdGhpcy50b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3MoKSk7IC8vIG9yIHdlJ3JlIHRvbGQgdG8gaWdub3JlIGl0LlxuXG4gICAgICBjb25zdCBzaG91bGRJbnZva2VQcmVzcyA9XG4gICAgICAgICFJc0xvbmdQcmVzc2luZ0luW2N1clN0YXRlXSB8fCBwcmVzc0lzTG9uZ0J1dFN0aWxsQ2FsbE9uUHJlc3M7XG4gICAgICBpZiAoc2hvdWxkSW52b2tlUHJlc3MgJiYgdGhpcy50b3VjaGFibGVIYW5kbGVQcmVzcykge1xuICAgICAgICBpZiAoIW5ld0lzSGlnaGxpZ2h0ICYmICFjdXJJc0hpZ2hsaWdodCkge1xuICAgICAgICAgIC8vIHdlIG5ldmVyIGhpZ2hsaWdodGVkIGJlY2F1c2Ugb2YgZGVsYXksIGJ1dCB3ZSBzaG91bGQgaGlnaGxpZ2h0IG5vd1xuICAgICAgICAgIHRoaXMuX3N0YXJ0SGlnaGxpZ2h0KGUpO1xuICAgICAgICAgIHRoaXMuX2VuZEhpZ2hsaWdodChlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgICAgIHRoaXMuX3BsYXlUb3VjaFNvdW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVQcmVzcyhlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQpO1xuICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ID0gbnVsbDtcbiAgfSxcblxuICBfcGxheVRvdWNoU291bmQ6IGZ1bmN0aW9uKCkge1xuICAgIFVJTWFuYWdlci5wbGF5VG91Y2hTb3VuZCgpO1xuICB9LFxuXG4gIF9zdGFydEhpZ2hsaWdodDogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMuX3NhdmVQcmVzc0luTG9jYXRpb24oZSk7XG4gICAgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luICYmIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbihlKTtcbiAgfSxcblxuICBfZW5kSGlnaGxpZ2h0OiBmdW5jdGlvbihlKSB7XG4gICAgaWYgKHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy50b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMgJiZcbiAgICAgICAgdGhpcy50b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMoKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0KGUpO1xuICAgICAgICB9LCB0aGlzLnRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUygpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQoZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxufTtcblxuY29uc3QgVG91Y2hhYmxlID0ge1xuICBNaXhpbjogVG91Y2hhYmxlTWl4aW4sXG4gIFRPVUNIX1RBUkdFVF9ERUJVRzogZmFsc2UsIC8vIEhpZ2hsaWdodHMgYWxsIHRvdWNoYWJsZSB0YXJnZXRzLiBUb2dnbGUgd2l0aCBJbnNwZWN0b3IuXG4gIC8qKlxuICAgKiBSZW5kZXJzIGEgZGVidWdnaW5nIG92ZXJsYXkgdG8gdmlzdWFsaXplIHRvdWNoIHRhcmdldCB3aXRoIGhpdFNsb3AgKG1pZ2h0IG5vdCB3b3JrIG9uIEFuZHJvaWQpLlxuICAgKi9cbiAgcmVuZGVyRGVidWdWaWV3OiAoe2NvbG9yLCBoaXRTbG9wfSkgPT4ge1xuICAgIGlmICghVG91Y2hhYmxlLlRPVUNIX1RBUkdFVF9ERUJVRykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICghX19ERVZfXykge1xuICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICdUb3VjaGFibGUuVE9VQ0hfVEFSR0VUX0RFQlVHIHNob3VsZCBub3QgYmUgZW5hYmxlZCBpbiBwcm9kIScsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBkZWJ1Z0hpdFNsb3BTdHlsZSA9IHt9O1xuICAgIGhpdFNsb3AgPSBoaXRTbG9wIHx8IHt0b3A6IDAsIGJvdHRvbTogMCwgbGVmdDogMCwgcmlnaHQ6IDB9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGhpdFNsb3ApIHtcbiAgICAgIGRlYnVnSGl0U2xvcFN0eWxlW2tleV0gPSAtaGl0U2xvcFtrZXldO1xuICAgIH1cbiAgICBjb25zdCBoZXhDb2xvciA9XG4gICAgICAnIycgKyAoJzAwMDAwMDAwJyArIG5vcm1hbGl6ZUNvbG9yKGNvbG9yKS50b1N0cmluZygxNikpLnN1YnN0cigtOCk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3XG4gICAgICAgIHBvaW50ZXJFdmVudHM9XCJub25lXCJcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICBib3JkZXJDb2xvcjogaGV4Q29sb3Iuc2xpY2UoMCwgLTIpICsgJzU1JywgLy8gTW9yZSBvcGFxdWVcbiAgICAgICAgICBib3JkZXJXaWR0aDogMSxcbiAgICAgICAgICBib3JkZXJTdHlsZTogJ2Rhc2hlZCcsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBoZXhDb2xvci5zbGljZSgwLCAtMikgKyAnMEYnLCAvLyBMZXNzIG9wYXF1ZVxuICAgICAgICAgIC4uLmRlYnVnSGl0U2xvcFN0eWxlLFxuICAgICAgICB9fVxuICAgICAgLz5cbiAgICApO1xuICB9LFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBUb3VjaGFibGU7XG4iXX0=