4096e38a18cdb2fed871c88d72ec18a3
/**
 * Copyright (c) 2015-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */

'use strict';

jest.mock('setupDevtools').mock('npmlog');

// there's a __mock__ for it.


jest.mock('InitializeCore', () => {}).mock('Image', () => mockComponent('Image')).mock('Text', () => mockComponent('Text', MockNativeMethods)).mock('TextInput', () => mockComponent('TextInput')).mock('Modal', () => mockComponent('Modal')).mock('View', () => mockComponent('View', MockNativeMethods)).mock('RefreshControl', () => require.requireMock('RefreshControlMock')).mock('ScrollView', () => require.requireMock('ScrollViewMock')).mock('ActivityIndicator', () => mockComponent('ActivityIndicator')).mock('ListView', () => require.requireMock('ListViewMock')).mock('ListViewDataSource', () => {
  const DataSource = require.requireActual('ListViewDataSource');
  DataSource.prototype.toJSON = function () {
    function ListViewDataSource(dataBlob) {
      this.items = 0;
      // Ensure this doesn't throw.
      try {
        Object.keys(dataBlob).forEach(key => {
          this.items += dataBlob[key] && (dataBlob[key].length || dataBlob[key].size || 0);
        });
      } catch (e) {
        this.items = 'unknown';
      }
    }

    return new ListViewDataSource(this._dataBlob);
  };
  return DataSource;
}).mock('AnimatedImplementation', () => {
  const AnimatedImplementation = require.requireActual('AnimatedImplementation');
  const oldCreate = AnimatedImplementation.createAnimatedComponent;
  AnimatedImplementation.createAnimatedComponent = function (Component) {
    const Wrapped = oldCreate(Component);
    Wrapped.__skipSetNativeProps_FOR_TESTS_ONLY = true;
    return Wrapped;
  };
  return AnimatedImplementation;
}).mock('ReactNative', () => {
  const ReactNative = require.requireActual('ReactNative');
  const NativeMethodsMixin = ReactNative.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.NativeMethodsMixin;

  Object.assign(NativeMethodsMixin, MockNativeMethods);
  Object.assign(ReactNative.NativeComponent.prototype, MockNativeMethods);

  return ReactNative;
}).mock('ensureComponentIsNative', () => () => true);

const MockNativeMethods = require.requireActual('./MockNativeMethods');
const mockComponent = require.requireActual('./mockComponent');

require.requireActual('../Libraries/polyfills/babelHelpers.js');
require.requireActual('../Libraries/polyfills/Object.es7.js');
require.requireActual('../Libraries/polyfills/error-guard');

global.__DEV__ = true;

global.Promise = require.requireActual('promise');
global.regeneratorRuntime = require.requireActual('regenerator-runtime/runtime');

global.requestAnimationFrame = function (callback) {
  return setTimeout(callback, 0);
};
global.cancelAnimationFrame = function (id) {
  clearTimeout(id);
};jest.setMock('ErrorUtils', require('ErrorUtils'));const mockNativeModules = {
  AlertManager: {
    alertWithArgs: jest.fn()
  },
  AppState: {
    addEventListener: jest.fn(),
    removeEventListener: jest.fn()
  },
  AsyncLocalStorage: {
    multiGet: jest.fn((keys, callback) => process.nextTick(() => callback(null, []))),
    multiSet: jest.fn((entries, callback) => process.nextTick(() => callback(null))),
    multiRemove: jest.fn((keys, callback) => process.nextTick(() => callback(null))),
    multiMerge: jest.fn((entries, callback) => process.nextTick(() => callback(null))),
    clear: jest.fn(callback => process.nextTick(() => callback(null))),
    getAllKeys: jest.fn(callback => process.nextTick(() => callback(null, [])))
  },
  BuildInfo: {
    appVersion: '0',
    buildVersion: '0'
  },
  Clipboard: {
    setString: jest.fn()
  },
  DataManager: {
    queryData: jest.fn()
  },
  DeviceInfo: {
    Dimensions: {
      window: {
        fontScale: 2,
        height: 1334,
        scale: 2,
        width: 750
      },
      screen: {
        fontScale: 2,
        height: 1334,
        scale: 2,
        width: 750
      }
    }
  },
  FacebookSDK: {
    login: jest.fn(),
    logout: jest.fn(),
    queryGraphPath: jest.fn((path, method, params, callback) => callback())
  },
  GraphPhotoUpload: {
    upload: jest.fn()
  },
  I18n: {
    translationsDictionary: JSON.stringify({
      'Good bye, {name}!|Bye message': '\u{00A1}Adi\u{00F3}s {name}!'
    })
  },
  ImageLoader: {
    getSize: jest.fn(url => Promise.resolve({ width: 320, height: 240 })),
    prefetchImage: jest.fn()
  },
  ImageViewManager: {
    getSize: jest.fn((uri, success) => process.nextTick(() => success(320, 240))),
    prefetchImage: jest.fn()
  },
  KeyboardObserver: {
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  Linking: {
    openURL: jest.fn(),
    canOpenURL: jest.fn(() => Promise.resolve(true)),
    addEventListener: jest.fn(),
    getInitialURL: jest.fn(() => Promise.resolve()),
    removeEventListener: jest.fn()
  },
  LocationObserver: {
    getCurrentPosition: jest.fn(),
    startObserving: jest.fn(),
    stopObserving: jest.fn()
  },
  ModalFullscreenViewManager: {},
  NetInfo: {
    fetch: jest.fn(() => Promise.resolve()),
    getConnectionInfo: jest.fn(() => Promise.resolve()),
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    isConnected: {
      fetch: jest.fn(() => Promise.resolve()),
      addEventListener: jest.fn(),
      removeEventListener: jest.fn()
    },
    isConnectionExpensive: jest.fn(() => Promise.resolve())
  },
  Networking: {
    sendRequest: jest.fn(),
    abortRequest: jest.fn(),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  PushNotificationManager: {
    presentLocalNotification: jest.fn(),
    scheduleLocalNotification: jest.fn(),
    cancelAllLocalNotifications: jest.fn(),
    removeAllDeliveredNotifications: jest.fn(),
    getDeliveredNotifications: jest.fn(callback => process.nextTick(() => [])),
    removeDeliveredNotifications: jest.fn(),
    setApplicationIconBadgeNumber: jest.fn(),
    getApplicationIconBadgeNumber: jest.fn(callback => process.nextTick(() => callback(0))),
    cancelLocalNotifications: jest.fn(),
    getScheduledLocalNotifications: jest.fn(callback => process.nextTick(() => callback())),
    requestPermissions: jest.fn(() => Promise.resolve({ alert: true, badge: true, sound: true })),
    abandonPermissions: jest.fn(),
    checkPermissions: jest.fn(callback => process.nextTick(() => callback({ alert: true, badge: true, sound: true }))),
    getInitialNotification: jest.fn(() => Promise.resolve(null)),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  },
  SourceCode: {
    scriptURL: null
  },
  StatusBarManager: {
    HEIGHT: 42,
    setColor: jest.fn(),
    setStyle: jest.fn(),
    setHidden: jest.fn(),
    setNetworkActivityIndicatorVisible: jest.fn(),
    setBackgroundColor: jest.fn(),
    setTranslucent: jest.fn()
  },
  Timing: {
    createTimer: jest.fn(),
    deleteTimer: jest.fn()
  },
  UIManager: {
    AndroidViewPager: {
      Commands: {
        setPage: jest.fn(),
        setPageWithoutAnimation: jest.fn()
      }
    },
    blur: jest.fn(),
    createView: jest.fn(),
    dispatchViewManagerCommand: jest.fn(),
    focus: jest.fn(),
    setChildren: jest.fn(),
    manageChildren: jest.fn(),
    updateView: jest.fn(),
    removeSubviewsFromContainerWithID: jest.fn(),
    replaceExistingNonRootView: jest.fn(),
    customBubblingEventTypes: {},
    customDirectEventTypes: {},
    AndroidTextInput: {
      Commands: {}
    },
    ModalFullscreenView: {
      Constants: {}
    },
    ScrollView: {
      Constants: {}
    },
    View: {
      Constants: {}
    }
  },
  BlobModule: {
    BLOB_URI_SCHEME: 'content',
    BLOB_URI_HOST: null,
    addNetworkingHandler: jest.fn(),
    enableBlobSupport: jest.fn(),
    disableBlobSupport: jest.fn(),
    createFromParts: jest.fn(),
    sendBlob: jest.fn(),
    release: jest.fn()
  },
  WebSocketModule: {
    connect: jest.fn(),
    send: jest.fn(),
    sendBinary: jest.fn(),
    ping: jest.fn(),
    close: jest.fn(),
    addListener: jest.fn(),
    removeListeners: jest.fn()
  }
};

Object.keys(mockNativeModules).forEach(module => {
  try {
    jest.doMock(module, () => mockNativeModules[module]); // needed by FacebookSDK-test
  } catch (e) {
    jest.doMock(module, () => mockNativeModules[module], { virtual: true });
  }
});

jest.doMock('NativeModules', () => mockNativeModules);

jest.doMock('requireNativeComponent', () => {
  const React = require('react');

  return viewName => class extends React.Component {
    render() {
      return React.createElement(viewName, this.props, this.props.children);
    }
  };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldHVwLmpzIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwibW9ja0NvbXBvbmVudCIsIk1vY2tOYXRpdmVNZXRob2RzIiwicmVxdWlyZSIsInJlcXVpcmVNb2NrIiwiRGF0YVNvdXJjZSIsInJlcXVpcmVBY3R1YWwiLCJwcm90b3R5cGUiLCJ0b0pTT04iLCJMaXN0Vmlld0RhdGFTb3VyY2UiLCJkYXRhQmxvYiIsIml0ZW1zIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJsZW5ndGgiLCJzaXplIiwiZSIsIl9kYXRhQmxvYiIsIkFuaW1hdGVkSW1wbGVtZW50YXRpb24iLCJvbGRDcmVhdGUiLCJjcmVhdGVBbmltYXRlZENvbXBvbmVudCIsIkNvbXBvbmVudCIsIldyYXBwZWQiLCJfX3NraXBTZXROYXRpdmVQcm9wc19GT1JfVEVTVFNfT05MWSIsIlJlYWN0TmF0aXZlIiwiTmF0aXZlTWV0aG9kc01peGluIiwiX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQiLCJhc3NpZ24iLCJOYXRpdmVDb21wb25lbnQiLCJnbG9iYWwiLCJfX0RFVl9fIiwiUHJvbWlzZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwic2V0VGltZW91dCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiaWQiLCJjbGVhclRpbWVvdXQiLCJzZXRNb2NrIiwibW9ja05hdGl2ZU1vZHVsZXMiLCJBbGVydE1hbmFnZXIiLCJhbGVydFdpdGhBcmdzIiwiZm4iLCJBcHBTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiQXN5bmNMb2NhbFN0b3JhZ2UiLCJtdWx0aUdldCIsInByb2Nlc3MiLCJuZXh0VGljayIsIm11bHRpU2V0IiwiZW50cmllcyIsIm11bHRpUmVtb3ZlIiwibXVsdGlNZXJnZSIsImNsZWFyIiwiZ2V0QWxsS2V5cyIsIkJ1aWxkSW5mbyIsImFwcFZlcnNpb24iLCJidWlsZFZlcnNpb24iLCJDbGlwYm9hcmQiLCJzZXRTdHJpbmciLCJEYXRhTWFuYWdlciIsInF1ZXJ5RGF0YSIsIkRldmljZUluZm8iLCJEaW1lbnNpb25zIiwid2luZG93IiwiZm9udFNjYWxlIiwiaGVpZ2h0Iiwic2NhbGUiLCJ3aWR0aCIsInNjcmVlbiIsIkZhY2Vib29rU0RLIiwibG9naW4iLCJsb2dvdXQiLCJxdWVyeUdyYXBoUGF0aCIsInBhdGgiLCJtZXRob2QiLCJwYXJhbXMiLCJHcmFwaFBob3RvVXBsb2FkIiwidXBsb2FkIiwiSTE4biIsInRyYW5zbGF0aW9uc0RpY3Rpb25hcnkiLCJKU09OIiwic3RyaW5naWZ5IiwiSW1hZ2VMb2FkZXIiLCJnZXRTaXplIiwidXJsIiwicmVzb2x2ZSIsInByZWZldGNoSW1hZ2UiLCJJbWFnZVZpZXdNYW5hZ2VyIiwidXJpIiwic3VjY2VzcyIsIktleWJvYXJkT2JzZXJ2ZXIiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVycyIsIkxpbmtpbmciLCJvcGVuVVJMIiwiY2FuT3BlblVSTCIsImdldEluaXRpYWxVUkwiLCJMb2NhdGlvbk9ic2VydmVyIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwic3RhcnRPYnNlcnZpbmciLCJzdG9wT2JzZXJ2aW5nIiwiTW9kYWxGdWxsc2NyZWVuVmlld01hbmFnZXIiLCJOZXRJbmZvIiwiZmV0Y2giLCJnZXRDb25uZWN0aW9uSW5mbyIsImlzQ29ubmVjdGVkIiwiaXNDb25uZWN0aW9uRXhwZW5zaXZlIiwiTmV0d29ya2luZyIsInNlbmRSZXF1ZXN0IiwiYWJvcnRSZXF1ZXN0IiwiUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIiLCJwcmVzZW50TG9jYWxOb3RpZmljYXRpb24iLCJzY2hlZHVsZUxvY2FsTm90aWZpY2F0aW9uIiwiY2FuY2VsQWxsTG9jYWxOb3RpZmljYXRpb25zIiwicmVtb3ZlQWxsRGVsaXZlcmVkTm90aWZpY2F0aW9ucyIsImdldERlbGl2ZXJlZE5vdGlmaWNhdGlvbnMiLCJyZW1vdmVEZWxpdmVyZWROb3RpZmljYXRpb25zIiwic2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIiLCJnZXRBcHBsaWNhdGlvbkljb25CYWRnZU51bWJlciIsImNhbmNlbExvY2FsTm90aWZpY2F0aW9ucyIsImdldFNjaGVkdWxlZExvY2FsTm90aWZpY2F0aW9ucyIsInJlcXVlc3RQZXJtaXNzaW9ucyIsImFsZXJ0IiwiYmFkZ2UiLCJzb3VuZCIsImFiYW5kb25QZXJtaXNzaW9ucyIsImNoZWNrUGVybWlzc2lvbnMiLCJnZXRJbml0aWFsTm90aWZpY2F0aW9uIiwiU291cmNlQ29kZSIsInNjcmlwdFVSTCIsIlN0YXR1c0Jhck1hbmFnZXIiLCJIRUlHSFQiLCJzZXRDb2xvciIsInNldFN0eWxlIiwic2V0SGlkZGVuIiwic2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSIsInNldEJhY2tncm91bmRDb2xvciIsInNldFRyYW5zbHVjZW50IiwiVGltaW5nIiwiY3JlYXRlVGltZXIiLCJkZWxldGVUaW1lciIsIlVJTWFuYWdlciIsIkFuZHJvaWRWaWV3UGFnZXIiLCJDb21tYW5kcyIsInNldFBhZ2UiLCJzZXRQYWdlV2l0aG91dEFuaW1hdGlvbiIsImJsdXIiLCJjcmVhdGVWaWV3IiwiZGlzcGF0Y2hWaWV3TWFuYWdlckNvbW1hbmQiLCJmb2N1cyIsInNldENoaWxkcmVuIiwibWFuYWdlQ2hpbGRyZW4iLCJ1cGRhdGVWaWV3IiwicmVtb3ZlU3Vidmlld3NGcm9tQ29udGFpbmVyV2l0aElEIiwicmVwbGFjZUV4aXN0aW5nTm9uUm9vdFZpZXciLCJjdXN0b21CdWJibGluZ0V2ZW50VHlwZXMiLCJjdXN0b21EaXJlY3RFdmVudFR5cGVzIiwiQW5kcm9pZFRleHRJbnB1dCIsIk1vZGFsRnVsbHNjcmVlblZpZXciLCJDb25zdGFudHMiLCJTY3JvbGxWaWV3IiwiVmlldyIsIkJsb2JNb2R1bGUiLCJCTE9CX1VSSV9TQ0hFTUUiLCJCTE9CX1VSSV9IT1NUIiwiYWRkTmV0d29ya2luZ0hhbmRsZXIiLCJlbmFibGVCbG9iU3VwcG9ydCIsImRpc2FibGVCbG9iU3VwcG9ydCIsImNyZWF0ZUZyb21QYXJ0cyIsInNlbmRCbG9iIiwicmVsZWFzZSIsIldlYlNvY2tldE1vZHVsZSIsImNvbm5lY3QiLCJzZW5kIiwic2VuZEJpbmFyeSIsInBpbmciLCJjbG9zZSIsIm1vZHVsZSIsImRvTW9jayIsInZpcnR1YWwiLCJSZWFjdCIsInZpZXdOYW1lIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsInByb3BzIiwiY2hpbGRyZW4iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7QUFTQTs7QUF1QkFBLEtBQUtDLElBQUwsQ0FBVSxlQUFWLEVBQTJCQSxJQUEzQixDQUFnQyxRQUFoQzs7QUFFQTs7O0FBR0FELEtBQ0dDLElBREgsQ0FDUSxnQkFEUixFQUMwQixNQUFNLENBQUUsQ0FEbEMsRUFFR0EsSUFGSCxDQUVRLE9BRlIsRUFFaUIsTUFBTUMsY0FBYyxPQUFkLENBRnZCLEVBR0dELElBSEgsQ0FHUSxNQUhSLEVBR2dCLE1BQU1DLGNBQWMsTUFBZCxFQUFzQkMsaUJBQXRCLENBSHRCLEVBSUdGLElBSkgsQ0FJUSxXQUpSLEVBSXFCLE1BQU1DLGNBQWMsV0FBZCxDQUozQixFQUtHRCxJQUxILENBS1EsT0FMUixFQUtpQixNQUFNQyxjQUFjLE9BQWQsQ0FMdkIsRUFNR0QsSUFOSCxDQU1RLE1BTlIsRUFNZ0IsTUFBTUMsY0FBYyxNQUFkLEVBQXNCQyxpQkFBdEIsQ0FOdEIsRUFPR0YsSUFQSCxDQU9RLGdCQVBSLEVBTzBCLE1BQU1HLFFBQVFDLFdBQVIsQ0FBb0Isb0JBQXBCLENBUGhDLEVBUUdKLElBUkgsQ0FRUSxZQVJSLEVBUXNCLE1BQU1HLFFBQVFDLFdBQVIsQ0FBb0IsZ0JBQXBCLENBUjVCLEVBU0dKLElBVEgsQ0FTUSxtQkFUUixFQVM2QixNQUFNQyxjQUFjLG1CQUFkLENBVG5DLEVBVUdELElBVkgsQ0FVUSxVQVZSLEVBVW9CLE1BQU1HLFFBQVFDLFdBQVIsQ0FBb0IsY0FBcEIsQ0FWMUIsRUFXR0osSUFYSCxDQVdRLG9CQVhSLEVBVzhCLE1BQU07QUFDaEMsUUFBTUssYUFBYUYsUUFBUUcsYUFBUixDQUFzQixvQkFBdEIsQ0FBbkI7QUFDQUQsYUFBV0UsU0FBWCxDQUFxQkMsTUFBckIsR0FBOEIsWUFBVztBQUN2QyxhQUFTQyxrQkFBVCxDQUE0QkMsUUFBNUIsRUFBc0M7QUFDcEMsV0FBS0MsS0FBTCxHQUFhLENBQWI7QUFDQTtBQUNBLFVBQUk7QUFDRkMsZUFBT0MsSUFBUCxDQUFZSCxRQUFaLEVBQXNCSSxPQUF0QixDQUE4QkMsT0FBTztBQUNuQyxlQUFLSixLQUFMLElBQ0VELFNBQVNLLEdBQVQsTUFDQ0wsU0FBU0ssR0FBVCxFQUFjQyxNQUFkLElBQXdCTixTQUFTSyxHQUFULEVBQWNFLElBQXRDLElBQThDLENBRC9DLENBREY7QUFHRCxTQUpEO0FBS0QsT0FORCxDQU1FLE9BQU9DLENBQVAsRUFBVTtBQUNWLGFBQUtQLEtBQUwsR0FBYSxTQUFiO0FBQ0Q7QUFDRjs7QUFFRCxXQUFPLElBQUlGLGtCQUFKLENBQXVCLEtBQUtVLFNBQTVCLENBQVA7QUFDRCxHQWhCRDtBQWlCQSxTQUFPZCxVQUFQO0FBQ0QsQ0EvQkgsRUFnQ0dMLElBaENILENBZ0NRLHdCQWhDUixFQWdDa0MsTUFBTTtBQUNwQyxRQUFNb0IseUJBQXlCakIsUUFBUUcsYUFBUixDQUM3Qix3QkFENkIsQ0FBL0I7QUFHQSxRQUFNZSxZQUFZRCx1QkFBdUJFLHVCQUF6QztBQUNBRix5QkFBdUJFLHVCQUF2QixHQUFpRCxVQUFTQyxTQUFULEVBQW9CO0FBQ25FLFVBQU1DLFVBQVVILFVBQVVFLFNBQVYsQ0FBaEI7QUFDQUMsWUFBUUMsbUNBQVIsR0FBOEMsSUFBOUM7QUFDQSxXQUFPRCxPQUFQO0FBQ0QsR0FKRDtBQUtBLFNBQU9KLHNCQUFQO0FBQ0QsQ0EzQ0gsRUE0Q0dwQixJQTVDSCxDQTRDUSxhQTVDUixFQTRDdUIsTUFBTTtBQUN6QixRQUFNMEIsY0FBY3ZCLFFBQVFHLGFBQVIsQ0FBc0IsYUFBdEIsQ0FBcEI7QUFDQSxRQUFNcUIscUJBQ0pELFlBQVlFLGtEQUFaLENBQ0dELGtCQUZMOztBQUlBZixTQUFPaUIsTUFBUCxDQUFjRixrQkFBZCxFQUFrQ3pCLGlCQUFsQztBQUNBVSxTQUFPaUIsTUFBUCxDQUFjSCxZQUFZSSxlQUFaLENBQTRCdkIsU0FBMUMsRUFBcURMLGlCQUFyRDs7QUFFQSxTQUFPd0IsV0FBUDtBQUNELENBdERILEVBdURHMUIsSUF2REgsQ0F1RFEseUJBdkRSLEVBdURtQyxNQUFNLE1BQU0sSUF2RC9DOztBQTFCQSxNQUFNRSxvQkFBb0JDLFFBQVFHLGFBQVIsQ0FBc0IscUJBQXRCLENBQTFCO0FBQ0EsTUFBTUwsZ0JBQWdCRSxRQUFRRyxhQUFSLENBQXNCLGlCQUF0QixDQUF0Qjs7QUFFQUgsUUFBUUcsYUFBUixDQUFzQix3Q0FBdEI7QUFDQUgsUUFBUUcsYUFBUixDQUFzQixzQ0FBdEI7QUFDQUgsUUFBUUcsYUFBUixDQUFzQixvQ0FBdEI7O0FBRUF5QixPQUFPQyxPQUFQLEdBQWlCLElBQWpCOztBQUVBRCxPQUFPRSxPQUFQLEdBQWlCOUIsUUFBUUcsYUFBUixDQUFzQixTQUF0QixDQUFqQjtBQUNBeUIsT0FBT0csa0JBQVAsR0FBNEIvQixRQUFRRyxhQUFSLENBQzFCLDZCQUQwQixDQUE1Qjs7QUFJQXlCLE9BQU9JLHFCQUFQLEdBQStCLFVBQVNDLFFBQVQsRUFBbUI7QUFDaEQsU0FBT0MsV0FBV0QsUUFBWCxFQUFxQixDQUFyQixDQUFQO0FBQ0QsQ0FGRDtBQUdBTCxPQUFPTyxvQkFBUCxHQUE4QixVQUFTQyxFQUFULEVBQWE7QUFDekNDLGVBQWFELEVBQWI7QUFDRCxDQUZELENBT0F4QyxLQUFLMEMsT0FBTCxDQUFhLFlBQWIsRUFBMkJ0QyxRQUFRLFlBQVIsQ0FBM0IsRUEyREEsTUFBTXVDLG9CQUFvQjtBQUN4QkMsZ0JBQWM7QUFDWkMsbUJBQWU3QyxLQUFLOEMsRUFBTDtBQURILEdBRFU7QUFJeEJDLFlBQVU7QUFDUkMsc0JBQWtCaEQsS0FBSzhDLEVBQUwsRUFEVjtBQUVSRyx5QkFBcUJqRCxLQUFLOEMsRUFBTDtBQUZiLEdBSmM7QUFReEJJLHFCQUFtQjtBQUNqQkMsY0FBVW5ELEtBQUs4QyxFQUFMLENBQVEsQ0FBQ2hDLElBQUQsRUFBT3VCLFFBQVAsS0FDaEJlLFFBQVFDLFFBQVIsQ0FBaUIsTUFBTWhCLFNBQVMsSUFBVCxFQUFlLEVBQWYsQ0FBdkIsQ0FEUSxDQURPO0FBSWpCaUIsY0FBVXRELEtBQUs4QyxFQUFMLENBQVEsQ0FBQ1MsT0FBRCxFQUFVbEIsUUFBVixLQUNoQmUsUUFBUUMsUUFBUixDQUFpQixNQUFNaEIsU0FBUyxJQUFULENBQXZCLENBRFEsQ0FKTztBQU9qQm1CLGlCQUFheEQsS0FBSzhDLEVBQUwsQ0FBUSxDQUFDaEMsSUFBRCxFQUFPdUIsUUFBUCxLQUNuQmUsUUFBUUMsUUFBUixDQUFpQixNQUFNaEIsU0FBUyxJQUFULENBQXZCLENBRFcsQ0FQSTtBQVVqQm9CLGdCQUFZekQsS0FBSzhDLEVBQUwsQ0FBUSxDQUFDUyxPQUFELEVBQVVsQixRQUFWLEtBQ2xCZSxRQUFRQyxRQUFSLENBQWlCLE1BQU1oQixTQUFTLElBQVQsQ0FBdkIsQ0FEVSxDQVZLO0FBYWpCcUIsV0FBTzFELEtBQUs4QyxFQUFMLENBQVFULFlBQVllLFFBQVFDLFFBQVIsQ0FBaUIsTUFBTWhCLFNBQVMsSUFBVCxDQUF2QixDQUFwQixDQWJVO0FBY2pCc0IsZ0JBQVkzRCxLQUFLOEMsRUFBTCxDQUFRVCxZQUFZZSxRQUFRQyxRQUFSLENBQWlCLE1BQU1oQixTQUFTLElBQVQsRUFBZSxFQUFmLENBQXZCLENBQXBCO0FBZEssR0FSSztBQXdCeEJ1QixhQUFXO0FBQ1RDLGdCQUFZLEdBREg7QUFFVEMsa0JBQWM7QUFGTCxHQXhCYTtBQTRCeEJDLGFBQVc7QUFDVEMsZUFBV2hFLEtBQUs4QyxFQUFMO0FBREYsR0E1QmE7QUErQnhCbUIsZUFBYTtBQUNYQyxlQUFXbEUsS0FBSzhDLEVBQUw7QUFEQSxHQS9CVztBQWtDeEJxQixjQUFZO0FBQ1ZDLGdCQUFZO0FBQ1ZDLGNBQVE7QUFDTkMsbUJBQVcsQ0FETDtBQUVOQyxnQkFBUSxJQUZGO0FBR05DLGVBQU8sQ0FIRDtBQUlOQyxlQUFPO0FBSkQsT0FERTtBQU9WQyxjQUFRO0FBQ05KLG1CQUFXLENBREw7QUFFTkMsZ0JBQVEsSUFGRjtBQUdOQyxlQUFPLENBSEQ7QUFJTkMsZUFBTztBQUpEO0FBUEU7QUFERixHQWxDWTtBQWtEeEJFLGVBQWE7QUFDWEMsV0FBTzVFLEtBQUs4QyxFQUFMLEVBREk7QUFFWCtCLFlBQVE3RSxLQUFLOEMsRUFBTCxFQUZHO0FBR1hnQyxvQkFBZ0I5RSxLQUFLOEMsRUFBTCxDQUFRLENBQUNpQyxJQUFELEVBQU9DLE1BQVAsRUFBZUMsTUFBZixFQUF1QjVDLFFBQXZCLEtBQW9DQSxVQUE1QztBQUhMLEdBbERXO0FBdUR4QjZDLG9CQUFrQjtBQUNoQkMsWUFBUW5GLEtBQUs4QyxFQUFMO0FBRFEsR0F2RE07QUEwRHhCc0MsUUFBTTtBQUNKQyw0QkFBd0JDLEtBQUtDLFNBQUwsQ0FBZTtBQUNyQyx1Q0FBaUM7QUFESSxLQUFmO0FBRHBCLEdBMURrQjtBQStEeEJDLGVBQWE7QUFDWEMsYUFBU3pGLEtBQUs4QyxFQUFMLENBQVE0QyxPQUFPeEQsUUFBUXlELE9BQVIsQ0FBZ0IsRUFBQ2xCLE9BQU8sR0FBUixFQUFhRixRQUFRLEdBQXJCLEVBQWhCLENBQWYsQ0FERTtBQUVYcUIsbUJBQWU1RixLQUFLOEMsRUFBTDtBQUZKLEdBL0RXO0FBbUV4QitDLG9CQUFrQjtBQUNoQkosYUFBU3pGLEtBQUs4QyxFQUFMLENBQVEsQ0FBQ2dELEdBQUQsRUFBTUMsT0FBTixLQUNmM0MsUUFBUUMsUUFBUixDQUFpQixNQUFNMEMsUUFBUSxHQUFSLEVBQWEsR0FBYixDQUF2QixDQURPLENBRE87QUFJaEJILG1CQUFlNUYsS0FBSzhDLEVBQUw7QUFKQyxHQW5FTTtBQXlFeEJrRCxvQkFBa0I7QUFDaEJDLGlCQUFhakcsS0FBSzhDLEVBQUwsRUFERztBQUVoQm9ELHFCQUFpQmxHLEtBQUs4QyxFQUFMO0FBRkQsR0F6RU07QUE2RXhCcUQsV0FBUztBQUNQQyxhQUFTcEcsS0FBSzhDLEVBQUwsRUFERjtBQUVQdUQsZ0JBQVlyRyxLQUFLOEMsRUFBTCxDQUFRLE1BQU1aLFFBQVF5RCxPQUFSLENBQWdCLElBQWhCLENBQWQsQ0FGTDtBQUdQM0Msc0JBQWtCaEQsS0FBSzhDLEVBQUwsRUFIWDtBQUlQd0QsbUJBQWV0RyxLQUFLOEMsRUFBTCxDQUFRLE1BQU1aLFFBQVF5RCxPQUFSLEVBQWQsQ0FKUjtBQUtQMUMseUJBQXFCakQsS0FBSzhDLEVBQUw7QUFMZCxHQTdFZTtBQW9GeEJ5RCxvQkFBa0I7QUFDaEJDLHdCQUFvQnhHLEtBQUs4QyxFQUFMLEVBREo7QUFFaEIyRCxvQkFBZ0J6RyxLQUFLOEMsRUFBTCxFQUZBO0FBR2hCNEQsbUJBQWUxRyxLQUFLOEMsRUFBTDtBQUhDLEdBcEZNO0FBeUZ4QjZELDhCQUE0QixFQXpGSjtBQTBGeEJDLFdBQVM7QUFDUEMsV0FBTzdHLEtBQUs4QyxFQUFMLENBQVEsTUFBTVosUUFBUXlELE9BQVIsRUFBZCxDQURBO0FBRVBtQix1QkFBbUI5RyxLQUFLOEMsRUFBTCxDQUFRLE1BQU1aLFFBQVF5RCxPQUFSLEVBQWQsQ0FGWjtBQUdQM0Msc0JBQWtCaEQsS0FBSzhDLEVBQUwsRUFIWDtBQUlQRyx5QkFBcUJqRCxLQUFLOEMsRUFBTCxFQUpkO0FBS1BpRSxpQkFBYTtBQUNYRixhQUFPN0csS0FBSzhDLEVBQUwsQ0FBUSxNQUFNWixRQUFReUQsT0FBUixFQUFkLENBREk7QUFFWDNDLHdCQUFrQmhELEtBQUs4QyxFQUFMLEVBRlA7QUFHWEcsMkJBQXFCakQsS0FBSzhDLEVBQUw7QUFIVixLQUxOO0FBVVBrRSwyQkFBdUJoSCxLQUFLOEMsRUFBTCxDQUFRLE1BQU1aLFFBQVF5RCxPQUFSLEVBQWQ7QUFWaEIsR0ExRmU7QUFzR3hCc0IsY0FBWTtBQUNWQyxpQkFBYWxILEtBQUs4QyxFQUFMLEVBREg7QUFFVnFFLGtCQUFjbkgsS0FBSzhDLEVBQUwsRUFGSjtBQUdWbUQsaUJBQWFqRyxLQUFLOEMsRUFBTCxFQUhIO0FBSVZvRCxxQkFBaUJsRyxLQUFLOEMsRUFBTDtBQUpQLEdBdEdZO0FBNEd4QnNFLDJCQUF5QjtBQUN2QkMsOEJBQTBCckgsS0FBSzhDLEVBQUwsRUFESDtBQUV2QndFLCtCQUEyQnRILEtBQUs4QyxFQUFMLEVBRko7QUFHdkJ5RSxpQ0FBNkJ2SCxLQUFLOEMsRUFBTCxFQUhOO0FBSXZCMEUscUNBQWlDeEgsS0FBSzhDLEVBQUwsRUFKVjtBQUt2QjJFLCtCQUEyQnpILEtBQUs4QyxFQUFMLENBQVFULFlBQVllLFFBQVFDLFFBQVIsQ0FBaUIsTUFBTSxFQUF2QixDQUFwQixDQUxKO0FBTXZCcUUsa0NBQThCMUgsS0FBSzhDLEVBQUwsRUFOUDtBQU92QjZFLG1DQUErQjNILEtBQUs4QyxFQUFMLEVBUFI7QUFRdkI4RSxtQ0FBK0I1SCxLQUFLOEMsRUFBTCxDQUFRVCxZQUNyQ2UsUUFBUUMsUUFBUixDQUFpQixNQUFNaEIsU0FBUyxDQUFULENBQXZCLENBRDZCLENBUlI7QUFXdkJ3Riw4QkFBMEI3SCxLQUFLOEMsRUFBTCxFQVhIO0FBWXZCZ0Ysb0NBQWdDOUgsS0FBSzhDLEVBQUwsQ0FBUVQsWUFDdENlLFFBQVFDLFFBQVIsQ0FBaUIsTUFBTWhCLFVBQXZCLENBRDhCLENBWlQ7QUFldkIwRix3QkFBb0IvSCxLQUFLOEMsRUFBTCxDQUFRLE1BQzFCWixRQUFReUQsT0FBUixDQUFnQixFQUFDcUMsT0FBTyxJQUFSLEVBQWNDLE9BQU8sSUFBckIsRUFBMkJDLE9BQU8sSUFBbEMsRUFBaEIsQ0FEa0IsQ0FmRztBQWtCdkJDLHdCQUFvQm5JLEtBQUs4QyxFQUFMLEVBbEJHO0FBbUJ2QnNGLHNCQUFrQnBJLEtBQUs4QyxFQUFMLENBQVFULFlBQ3hCZSxRQUFRQyxRQUFSLENBQWlCLE1BQU1oQixTQUFTLEVBQUMyRixPQUFPLElBQVIsRUFBY0MsT0FBTyxJQUFyQixFQUEyQkMsT0FBTyxJQUFsQyxFQUFULENBQXZCLENBRGdCLENBbkJLO0FBc0J2QkcsNEJBQXdCckksS0FBSzhDLEVBQUwsQ0FBUSxNQUFNWixRQUFReUQsT0FBUixDQUFnQixJQUFoQixDQUFkLENBdEJEO0FBdUJ2Qk0saUJBQWFqRyxLQUFLOEMsRUFBTCxFQXZCVTtBQXdCdkJvRCxxQkFBaUJsRyxLQUFLOEMsRUFBTDtBQXhCTSxHQTVHRDtBQXNJeEJ3RixjQUFZO0FBQ1ZDLGVBQVc7QUFERCxHQXRJWTtBQXlJeEJDLG9CQUFrQjtBQUNoQkMsWUFBUSxFQURRO0FBRWhCQyxjQUFVMUksS0FBSzhDLEVBQUwsRUFGTTtBQUdoQjZGLGNBQVUzSSxLQUFLOEMsRUFBTCxFQUhNO0FBSWhCOEYsZUFBVzVJLEtBQUs4QyxFQUFMLEVBSks7QUFLaEIrRix3Q0FBb0M3SSxLQUFLOEMsRUFBTCxFQUxwQjtBQU1oQmdHLHdCQUFvQjlJLEtBQUs4QyxFQUFMLEVBTko7QUFPaEJpRyxvQkFBZ0IvSSxLQUFLOEMsRUFBTDtBQVBBLEdBeklNO0FBa0p4QmtHLFVBQVE7QUFDTkMsaUJBQWFqSixLQUFLOEMsRUFBTCxFQURQO0FBRU5vRyxpQkFBYWxKLEtBQUs4QyxFQUFMO0FBRlAsR0FsSmdCO0FBc0p4QnFHLGFBQVc7QUFDVEMsc0JBQWtCO0FBQ2hCQyxnQkFBVTtBQUNSQyxpQkFBU3RKLEtBQUs4QyxFQUFMLEVBREQ7QUFFUnlHLGlDQUF5QnZKLEtBQUs4QyxFQUFMO0FBRmpCO0FBRE0sS0FEVDtBQU9UMEcsVUFBTXhKLEtBQUs4QyxFQUFMLEVBUEc7QUFRVDJHLGdCQUFZekosS0FBSzhDLEVBQUwsRUFSSDtBQVNUNEcsZ0NBQTRCMUosS0FBSzhDLEVBQUwsRUFUbkI7QUFVVDZHLFdBQU8zSixLQUFLOEMsRUFBTCxFQVZFO0FBV1Q4RyxpQkFBYTVKLEtBQUs4QyxFQUFMLEVBWEo7QUFZVCtHLG9CQUFnQjdKLEtBQUs4QyxFQUFMLEVBWlA7QUFhVGdILGdCQUFZOUosS0FBSzhDLEVBQUwsRUFiSDtBQWNUaUgsdUNBQW1DL0osS0FBSzhDLEVBQUwsRUFkMUI7QUFlVGtILGdDQUE0QmhLLEtBQUs4QyxFQUFMLEVBZm5CO0FBZ0JUbUgsOEJBQTBCLEVBaEJqQjtBQWlCVEMsNEJBQXdCLEVBakJmO0FBa0JUQyxzQkFBa0I7QUFDaEJkLGdCQUFVO0FBRE0sS0FsQlQ7QUFxQlRlLHlCQUFxQjtBQUNuQkMsaUJBQVc7QUFEUSxLQXJCWjtBQXdCVEMsZ0JBQVk7QUFDVkQsaUJBQVc7QUFERCxLQXhCSDtBQTJCVEUsVUFBTTtBQUNKRixpQkFBVztBQURQO0FBM0JHLEdBdEphO0FBcUx4QkcsY0FBWTtBQUNWQyxxQkFBaUIsU0FEUDtBQUVWQyxtQkFBZSxJQUZMO0FBR1ZDLDBCQUFzQjNLLEtBQUs4QyxFQUFMLEVBSFo7QUFJVjhILHVCQUFtQjVLLEtBQUs4QyxFQUFMLEVBSlQ7QUFLVitILHdCQUFvQjdLLEtBQUs4QyxFQUFMLEVBTFY7QUFNVmdJLHFCQUFpQjlLLEtBQUs4QyxFQUFMLEVBTlA7QUFPVmlJLGNBQVUvSyxLQUFLOEMsRUFBTCxFQVBBO0FBUVZrSSxhQUFTaEwsS0FBSzhDLEVBQUw7QUFSQyxHQXJMWTtBQStMeEJtSSxtQkFBaUI7QUFDZkMsYUFBU2xMLEtBQUs4QyxFQUFMLEVBRE07QUFFZnFJLFVBQU1uTCxLQUFLOEMsRUFBTCxFQUZTO0FBR2ZzSSxnQkFBWXBMLEtBQUs4QyxFQUFMLEVBSEc7QUFJZnVJLFVBQU1yTCxLQUFLOEMsRUFBTCxFQUpTO0FBS2Z3SSxXQUFPdEwsS0FBSzhDLEVBQUwsRUFMUTtBQU1mbUQsaUJBQWFqRyxLQUFLOEMsRUFBTCxFQU5FO0FBT2ZvRCxxQkFBaUJsRyxLQUFLOEMsRUFBTDtBQVBGO0FBL0xPLENBQTFCOztBQTBNQWpDLE9BQU9DLElBQVAsQ0FBWTZCLGlCQUFaLEVBQStCNUIsT0FBL0IsQ0FBdUN3SyxVQUFVO0FBQy9DLE1BQUk7QUFDRnZMLFNBQUt3TCxNQUFMLENBQVlELE1BQVosRUFBb0IsTUFBTTVJLGtCQUFrQjRJLE1BQWxCLENBQTFCLEVBREUsQ0FDb0Q7QUFDdkQsR0FGRCxDQUVFLE9BQU9wSyxDQUFQLEVBQVU7QUFDVm5CLFNBQUt3TCxNQUFMLENBQVlELE1BQVosRUFBb0IsTUFBTTVJLGtCQUFrQjRJLE1BQWxCLENBQTFCLEVBQXFELEVBQUNFLFNBQVMsSUFBVixFQUFyRDtBQUNEO0FBQ0YsQ0FORDs7QUFRQXpMLEtBQUt3TCxNQUFMLENBQVksZUFBWixFQUE2QixNQUFNN0ksaUJBQW5DOztBQUVBM0MsS0FBS3dMLE1BQUwsQ0FBWSx3QkFBWixFQUFzQyxNQUFNO0FBQzFDLFFBQU1FLFFBQVF0TCxRQUFRLE9BQVIsQ0FBZDs7QUFFQSxTQUFPdUwsWUFDTCxjQUFjRCxNQUFNbEssU0FBcEIsQ0FBOEI7QUFDNUJvSyxhQUFTO0FBQ1AsYUFBT0YsTUFBTUcsYUFBTixDQUFvQkYsUUFBcEIsRUFBOEIsS0FBS0csS0FBbkMsRUFBMEMsS0FBS0EsS0FBTCxDQUFXQyxRQUFyRCxDQUFQO0FBQ0Q7QUFIMkIsR0FEaEM7QUFNRCxDQVREIiwiZmlsZSI6InNldHVwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBNb2NrTmF0aXZlTWV0aG9kcyA9IHJlcXVpcmUucmVxdWlyZUFjdHVhbCgnLi9Nb2NrTmF0aXZlTWV0aG9kcycpO1xuY29uc3QgbW9ja0NvbXBvbmVudCA9IHJlcXVpcmUucmVxdWlyZUFjdHVhbCgnLi9tb2NrQ29tcG9uZW50Jyk7XG5cbnJlcXVpcmUucmVxdWlyZUFjdHVhbCgnLi4vTGlicmFyaWVzL3BvbHlmaWxscy9iYWJlbEhlbHBlcnMuanMnKTtcbnJlcXVpcmUucmVxdWlyZUFjdHVhbCgnLi4vTGlicmFyaWVzL3BvbHlmaWxscy9PYmplY3QuZXM3LmpzJyk7XG5yZXF1aXJlLnJlcXVpcmVBY3R1YWwoJy4uL0xpYnJhcmllcy9wb2x5ZmlsbHMvZXJyb3ItZ3VhcmQnKTtcblxuZ2xvYmFsLl9fREVWX18gPSB0cnVlO1xuXG5nbG9iYWwuUHJvbWlzZSA9IHJlcXVpcmUucmVxdWlyZUFjdHVhbCgncHJvbWlzZScpO1xuZ2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZSA9IHJlcXVpcmUucmVxdWlyZUFjdHVhbChcbiAgJ3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZScsXG4pO1xuXG5nbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIHNldFRpbWVvdXQoY2FsbGJhY2ssIDApO1xufTtcbmdsb2JhbC5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGlkKSB7XG4gIGNsZWFyVGltZW91dChpZCk7XG59O1xuXG5qZXN0Lm1vY2soJ3NldHVwRGV2dG9vbHMnKS5tb2NrKCducG1sb2cnKTtcblxuLy8gdGhlcmUncyBhIF9fbW9ja19fIGZvciBpdC5cbmplc3Quc2V0TW9jaygnRXJyb3JVdGlscycsIHJlcXVpcmUoJ0Vycm9yVXRpbHMnKSk7XG5cbmplc3RcbiAgLm1vY2soJ0luaXRpYWxpemVDb3JlJywgKCkgPT4ge30pXG4gIC5tb2NrKCdJbWFnZScsICgpID0+IG1vY2tDb21wb25lbnQoJ0ltYWdlJykpXG4gIC5tb2NrKCdUZXh0JywgKCkgPT4gbW9ja0NvbXBvbmVudCgnVGV4dCcsIE1vY2tOYXRpdmVNZXRob2RzKSlcbiAgLm1vY2soJ1RleHRJbnB1dCcsICgpID0+IG1vY2tDb21wb25lbnQoJ1RleHRJbnB1dCcpKVxuICAubW9jaygnTW9kYWwnLCAoKSA9PiBtb2NrQ29tcG9uZW50KCdNb2RhbCcpKVxuICAubW9jaygnVmlldycsICgpID0+IG1vY2tDb21wb25lbnQoJ1ZpZXcnLCBNb2NrTmF0aXZlTWV0aG9kcykpXG4gIC5tb2NrKCdSZWZyZXNoQ29udHJvbCcsICgpID0+IHJlcXVpcmUucmVxdWlyZU1vY2soJ1JlZnJlc2hDb250cm9sTW9jaycpKVxuICAubW9jaygnU2Nyb2xsVmlldycsICgpID0+IHJlcXVpcmUucmVxdWlyZU1vY2soJ1Njcm9sbFZpZXdNb2NrJykpXG4gIC5tb2NrKCdBY3Rpdml0eUluZGljYXRvcicsICgpID0+IG1vY2tDb21wb25lbnQoJ0FjdGl2aXR5SW5kaWNhdG9yJykpXG4gIC5tb2NrKCdMaXN0VmlldycsICgpID0+IHJlcXVpcmUucmVxdWlyZU1vY2soJ0xpc3RWaWV3TW9jaycpKVxuICAubW9jaygnTGlzdFZpZXdEYXRhU291cmNlJywgKCkgPT4ge1xuICAgIGNvbnN0IERhdGFTb3VyY2UgPSByZXF1aXJlLnJlcXVpcmVBY3R1YWwoJ0xpc3RWaWV3RGF0YVNvdXJjZScpO1xuICAgIERhdGFTb3VyY2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gTGlzdFZpZXdEYXRhU291cmNlKGRhdGFCbG9iKSB7XG4gICAgICAgIHRoaXMuaXRlbXMgPSAwO1xuICAgICAgICAvLyBFbnN1cmUgdGhpcyBkb2Vzbid0IHRocm93LlxuICAgICAgICB0cnkge1xuICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGFCbG9iKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zICs9XG4gICAgICAgICAgICAgIGRhdGFCbG9iW2tleV0gJiZcbiAgICAgICAgICAgICAgKGRhdGFCbG9iW2tleV0ubGVuZ3RoIHx8IGRhdGFCbG9iW2tleV0uc2l6ZSB8fCAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRoaXMuaXRlbXMgPSAndW5rbm93bic7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBMaXN0Vmlld0RhdGFTb3VyY2UodGhpcy5fZGF0YUJsb2IpO1xuICAgIH07XG4gICAgcmV0dXJuIERhdGFTb3VyY2U7XG4gIH0pXG4gIC5tb2NrKCdBbmltYXRlZEltcGxlbWVudGF0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IEFuaW1hdGVkSW1wbGVtZW50YXRpb24gPSByZXF1aXJlLnJlcXVpcmVBY3R1YWwoXG4gICAgICAnQW5pbWF0ZWRJbXBsZW1lbnRhdGlvbicsXG4gICAgKTtcbiAgICBjb25zdCBvbGRDcmVhdGUgPSBBbmltYXRlZEltcGxlbWVudGF0aW9uLmNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50O1xuICAgIEFuaW1hdGVkSW1wbGVtZW50YXRpb24uY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQgPSBmdW5jdGlvbihDb21wb25lbnQpIHtcbiAgICAgIGNvbnN0IFdyYXBwZWQgPSBvbGRDcmVhdGUoQ29tcG9uZW50KTtcbiAgICAgIFdyYXBwZWQuX19za2lwU2V0TmF0aXZlUHJvcHNfRk9SX1RFU1RTX09OTFkgPSB0cnVlO1xuICAgICAgcmV0dXJuIFdyYXBwZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gQW5pbWF0ZWRJbXBsZW1lbnRhdGlvbjtcbiAgfSlcbiAgLm1vY2soJ1JlYWN0TmF0aXZlJywgKCkgPT4ge1xuICAgIGNvbnN0IFJlYWN0TmF0aXZlID0gcmVxdWlyZS5yZXF1aXJlQWN0dWFsKCdSZWFjdE5hdGl2ZScpO1xuICAgIGNvbnN0IE5hdGl2ZU1ldGhvZHNNaXhpbiA9XG4gICAgICBSZWFjdE5hdGl2ZS5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRFxuICAgICAgICAuTmF0aXZlTWV0aG9kc01peGluO1xuXG4gICAgT2JqZWN0LmFzc2lnbihOYXRpdmVNZXRob2RzTWl4aW4sIE1vY2tOYXRpdmVNZXRob2RzKTtcbiAgICBPYmplY3QuYXNzaWduKFJlYWN0TmF0aXZlLk5hdGl2ZUNvbXBvbmVudC5wcm90b3R5cGUsIE1vY2tOYXRpdmVNZXRob2RzKTtcblxuICAgIHJldHVybiBSZWFjdE5hdGl2ZTtcbiAgfSlcbiAgLm1vY2soJ2Vuc3VyZUNvbXBvbmVudElzTmF0aXZlJywgKCkgPT4gKCkgPT4gdHJ1ZSk7XG5cbmNvbnN0IG1vY2tOYXRpdmVNb2R1bGVzID0ge1xuICBBbGVydE1hbmFnZXI6IHtcbiAgICBhbGVydFdpdGhBcmdzOiBqZXN0LmZuKCksXG4gIH0sXG4gIEFwcFN0YXRlOiB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgfSxcbiAgQXN5bmNMb2NhbFN0b3JhZ2U6IHtcbiAgICBtdWx0aUdldDogamVzdC5mbigoa2V5cywgY2FsbGJhY2spID0+XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwsIFtdKSksXG4gICAgKSxcbiAgICBtdWx0aVNldDogamVzdC5mbigoZW50cmllcywgY2FsbGJhY2spID0+XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwpKSxcbiAgICApLFxuICAgIG11bHRpUmVtb3ZlOiBqZXN0LmZuKChrZXlzLCBjYWxsYmFjaykgPT5cbiAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gY2FsbGJhY2sobnVsbCkpLFxuICAgICksXG4gICAgbXVsdGlNZXJnZTogamVzdC5mbigoZW50cmllcywgY2FsbGJhY2spID0+XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKG51bGwpKSxcbiAgICApLFxuICAgIGNsZWFyOiBqZXN0LmZuKGNhbGxiYWNrID0+IHByb2Nlc3MubmV4dFRpY2soKCkgPT4gY2FsbGJhY2sobnVsbCkpKSxcbiAgICBnZXRBbGxLZXlzOiBqZXN0LmZuKGNhbGxiYWNrID0+IHByb2Nlc3MubmV4dFRpY2soKCkgPT4gY2FsbGJhY2sobnVsbCwgW10pKSksXG4gIH0sXG4gIEJ1aWxkSW5mbzoge1xuICAgIGFwcFZlcnNpb246ICcwJyxcbiAgICBidWlsZFZlcnNpb246ICcwJyxcbiAgfSxcbiAgQ2xpcGJvYXJkOiB7XG4gICAgc2V0U3RyaW5nOiBqZXN0LmZuKCksXG4gIH0sXG4gIERhdGFNYW5hZ2VyOiB7XG4gICAgcXVlcnlEYXRhOiBqZXN0LmZuKCksXG4gIH0sXG4gIERldmljZUluZm86IHtcbiAgICBEaW1lbnNpb25zOiB7XG4gICAgICB3aW5kb3c6IHtcbiAgICAgICAgZm9udFNjYWxlOiAyLFxuICAgICAgICBoZWlnaHQ6IDEzMzQsXG4gICAgICAgIHNjYWxlOiAyLFxuICAgICAgICB3aWR0aDogNzUwLFxuICAgICAgfSxcbiAgICAgIHNjcmVlbjoge1xuICAgICAgICBmb250U2NhbGU6IDIsXG4gICAgICAgIGhlaWdodDogMTMzNCxcbiAgICAgICAgc2NhbGU6IDIsXG4gICAgICAgIHdpZHRoOiA3NTAsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIEZhY2Vib29rU0RLOiB7XG4gICAgbG9naW46IGplc3QuZm4oKSxcbiAgICBsb2dvdXQ6IGplc3QuZm4oKSxcbiAgICBxdWVyeUdyYXBoUGF0aDogamVzdC5mbigocGF0aCwgbWV0aG9kLCBwYXJhbXMsIGNhbGxiYWNrKSA9PiBjYWxsYmFjaygpKSxcbiAgfSxcbiAgR3JhcGhQaG90b1VwbG9hZDoge1xuICAgIHVwbG9hZDogamVzdC5mbigpLFxuICB9LFxuICBJMThuOiB7XG4gICAgdHJhbnNsYXRpb25zRGljdGlvbmFyeTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgJ0dvb2QgYnllLCB7bmFtZX0hfEJ5ZSBtZXNzYWdlJzogJ1xcdXswMEExfUFkaVxcdXswMEYzfXMge25hbWV9IScsXG4gICAgfSksXG4gIH0sXG4gIEltYWdlTG9hZGVyOiB7XG4gICAgZ2V0U2l6ZTogamVzdC5mbih1cmwgPT4gUHJvbWlzZS5yZXNvbHZlKHt3aWR0aDogMzIwLCBoZWlnaHQ6IDI0MH0pKSxcbiAgICBwcmVmZXRjaEltYWdlOiBqZXN0LmZuKCksXG4gIH0sXG4gIEltYWdlVmlld01hbmFnZXI6IHtcbiAgICBnZXRTaXplOiBqZXN0LmZuKCh1cmksIHN1Y2Nlc3MpID0+XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHN1Y2Nlc3MoMzIwLCAyNDApKSxcbiAgICApLFxuICAgIHByZWZldGNoSW1hZ2U6IGplc3QuZm4oKSxcbiAgfSxcbiAgS2V5Ym9hcmRPYnNlcnZlcjoge1xuICAgIGFkZExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlTGlzdGVuZXJzOiBqZXN0LmZuKCksXG4gIH0sXG4gIExpbmtpbmc6IHtcbiAgICBvcGVuVVJMOiBqZXN0LmZuKCksXG4gICAgY2FuT3BlblVSTDogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUodHJ1ZSkpLFxuICAgIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICBnZXRJbml0aWFsVVJMOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gIH0sXG4gIExvY2F0aW9uT2JzZXJ2ZXI6IHtcbiAgICBnZXRDdXJyZW50UG9zaXRpb246IGplc3QuZm4oKSxcbiAgICBzdGFydE9ic2VydmluZzogamVzdC5mbigpLFxuICAgIHN0b3BPYnNlcnZpbmc6IGplc3QuZm4oKSxcbiAgfSxcbiAgTW9kYWxGdWxsc2NyZWVuVmlld01hbmFnZXI6IHt9LFxuICBOZXRJbmZvOiB7XG4gICAgZmV0Y2g6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpLFxuICAgIGdldENvbm5lY3Rpb25JbmZvOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIGlzQ29ubmVjdGVkOiB7XG4gICAgICBmZXRjaDogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSksXG4gICAgICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgfSxcbiAgICBpc0Nvbm5lY3Rpb25FeHBlbnNpdmU6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpLFxuICB9LFxuICBOZXR3b3JraW5nOiB7XG4gICAgc2VuZFJlcXVlc3Q6IGplc3QuZm4oKSxcbiAgICBhYm9ydFJlcXVlc3Q6IGplc3QuZm4oKSxcbiAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUxpc3RlbmVyczogamVzdC5mbigpLFxuICB9LFxuICBQdXNoTm90aWZpY2F0aW9uTWFuYWdlcjoge1xuICAgIHByZXNlbnRMb2NhbE5vdGlmaWNhdGlvbjogamVzdC5mbigpLFxuICAgIHNjaGVkdWxlTG9jYWxOb3RpZmljYXRpb246IGplc3QuZm4oKSxcbiAgICBjYW5jZWxBbGxMb2NhbE5vdGlmaWNhdGlvbnM6IGplc3QuZm4oKSxcbiAgICByZW1vdmVBbGxEZWxpdmVyZWROb3RpZmljYXRpb25zOiBqZXN0LmZuKCksXG4gICAgZ2V0RGVsaXZlcmVkTm90aWZpY2F0aW9uczogamVzdC5mbihjYWxsYmFjayA9PiBwcm9jZXNzLm5leHRUaWNrKCgpID0+IFtdKSksXG4gICAgcmVtb3ZlRGVsaXZlcmVkTm90aWZpY2F0aW9uczogamVzdC5mbigpLFxuICAgIHNldEFwcGxpY2F0aW9uSWNvbkJhZGdlTnVtYmVyOiBqZXN0LmZuKCksXG4gICAgZ2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXI6IGplc3QuZm4oY2FsbGJhY2sgPT5cbiAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gY2FsbGJhY2soMCkpLFxuICAgICksXG4gICAgY2FuY2VsTG9jYWxOb3RpZmljYXRpb25zOiBqZXN0LmZuKCksXG4gICAgZ2V0U2NoZWR1bGVkTG9jYWxOb3RpZmljYXRpb25zOiBqZXN0LmZuKGNhbGxiYWNrID0+XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IGNhbGxiYWNrKCkpLFxuICAgICksXG4gICAgcmVxdWVzdFBlcm1pc3Npb25zOiBqZXN0LmZuKCgpID0+XG4gICAgICBQcm9taXNlLnJlc29sdmUoe2FsZXJ0OiB0cnVlLCBiYWRnZTogdHJ1ZSwgc291bmQ6IHRydWV9KSxcbiAgICApLFxuICAgIGFiYW5kb25QZXJtaXNzaW9uczogamVzdC5mbigpLFxuICAgIGNoZWNrUGVybWlzc2lvbnM6IGplc3QuZm4oY2FsbGJhY2sgPT5cbiAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gY2FsbGJhY2soe2FsZXJ0OiB0cnVlLCBiYWRnZTogdHJ1ZSwgc291bmQ6IHRydWV9KSksXG4gICAgKSxcbiAgICBnZXRJbml0aWFsTm90aWZpY2F0aW9uOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSksXG4gICAgYWRkTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICByZW1vdmVMaXN0ZW5lcnM6IGplc3QuZm4oKSxcbiAgfSxcbiAgU291cmNlQ29kZToge1xuICAgIHNjcmlwdFVSTDogbnVsbCxcbiAgfSxcbiAgU3RhdHVzQmFyTWFuYWdlcjoge1xuICAgIEhFSUdIVDogNDIsXG4gICAgc2V0Q29sb3I6IGplc3QuZm4oKSxcbiAgICBzZXRTdHlsZTogamVzdC5mbigpLFxuICAgIHNldEhpZGRlbjogamVzdC5mbigpLFxuICAgIHNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGU6IGplc3QuZm4oKSxcbiAgICBzZXRCYWNrZ3JvdW5kQ29sb3I6IGplc3QuZm4oKSxcbiAgICBzZXRUcmFuc2x1Y2VudDogamVzdC5mbigpLFxuICB9LFxuICBUaW1pbmc6IHtcbiAgICBjcmVhdGVUaW1lcjogamVzdC5mbigpLFxuICAgIGRlbGV0ZVRpbWVyOiBqZXN0LmZuKCksXG4gIH0sXG4gIFVJTWFuYWdlcjoge1xuICAgIEFuZHJvaWRWaWV3UGFnZXI6IHtcbiAgICAgIENvbW1hbmRzOiB7XG4gICAgICAgIHNldFBhZ2U6IGplc3QuZm4oKSxcbiAgICAgICAgc2V0UGFnZVdpdGhvdXRBbmltYXRpb246IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBibHVyOiBqZXN0LmZuKCksXG4gICAgY3JlYXRlVmlldzogamVzdC5mbigpLFxuICAgIGRpc3BhdGNoVmlld01hbmFnZXJDb21tYW5kOiBqZXN0LmZuKCksXG4gICAgZm9jdXM6IGplc3QuZm4oKSxcbiAgICBzZXRDaGlsZHJlbjogamVzdC5mbigpLFxuICAgIG1hbmFnZUNoaWxkcmVuOiBqZXN0LmZuKCksXG4gICAgdXBkYXRlVmlldzogamVzdC5mbigpLFxuICAgIHJlbW92ZVN1YnZpZXdzRnJvbUNvbnRhaW5lcldpdGhJRDogamVzdC5mbigpLFxuICAgIHJlcGxhY2VFeGlzdGluZ05vblJvb3RWaWV3OiBqZXN0LmZuKCksXG4gICAgY3VzdG9tQnViYmxpbmdFdmVudFR5cGVzOiB7fSxcbiAgICBjdXN0b21EaXJlY3RFdmVudFR5cGVzOiB7fSxcbiAgICBBbmRyb2lkVGV4dElucHV0OiB7XG4gICAgICBDb21tYW5kczoge30sXG4gICAgfSxcbiAgICBNb2RhbEZ1bGxzY3JlZW5WaWV3OiB7XG4gICAgICBDb25zdGFudHM6IHt9LFxuICAgIH0sXG4gICAgU2Nyb2xsVmlldzoge1xuICAgICAgQ29uc3RhbnRzOiB7fSxcbiAgICB9LFxuICAgIFZpZXc6IHtcbiAgICAgIENvbnN0YW50czoge30sXG4gICAgfSxcbiAgfSxcbiAgQmxvYk1vZHVsZToge1xuICAgIEJMT0JfVVJJX1NDSEVNRTogJ2NvbnRlbnQnLFxuICAgIEJMT0JfVVJJX0hPU1Q6IG51bGwsXG4gICAgYWRkTmV0d29ya2luZ0hhbmRsZXI6IGplc3QuZm4oKSxcbiAgICBlbmFibGVCbG9iU3VwcG9ydDogamVzdC5mbigpLFxuICAgIGRpc2FibGVCbG9iU3VwcG9ydDogamVzdC5mbigpLFxuICAgIGNyZWF0ZUZyb21QYXJ0czogamVzdC5mbigpLFxuICAgIHNlbmRCbG9iOiBqZXN0LmZuKCksXG4gICAgcmVsZWFzZTogamVzdC5mbigpLFxuICB9LFxuICBXZWJTb2NrZXRNb2R1bGU6IHtcbiAgICBjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgc2VuZDogamVzdC5mbigpLFxuICAgIHNlbmRCaW5hcnk6IGplc3QuZm4oKSxcbiAgICBwaW5nOiBqZXN0LmZuKCksXG4gICAgY2xvc2U6IGplc3QuZm4oKSxcbiAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUxpc3RlbmVyczogamVzdC5mbigpLFxuICB9LFxufTtcblxuT2JqZWN0LmtleXMobW9ja05hdGl2ZU1vZHVsZXMpLmZvckVhY2gobW9kdWxlID0+IHtcbiAgdHJ5IHtcbiAgICBqZXN0LmRvTW9jayhtb2R1bGUsICgpID0+IG1vY2tOYXRpdmVNb2R1bGVzW21vZHVsZV0pOyAvLyBuZWVkZWQgYnkgRmFjZWJvb2tTREstdGVzdFxuICB9IGNhdGNoIChlKSB7XG4gICAgamVzdC5kb01vY2sobW9kdWxlLCAoKSA9PiBtb2NrTmF0aXZlTW9kdWxlc1ttb2R1bGVdLCB7dmlydHVhbDogdHJ1ZX0pO1xuICB9XG59KTtcblxuamVzdC5kb01vY2soJ05hdGl2ZU1vZHVsZXMnLCAoKSA9PiBtb2NrTmF0aXZlTW9kdWxlcyk7XG5cbmplc3QuZG9Nb2NrKCdyZXF1aXJlTmF0aXZlQ29tcG9uZW50JywgKCkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbiAgcmV0dXJuIHZpZXdOYW1lID0+XG4gICAgY2xhc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCh2aWV3TmFtZSwgdGhpcy5wcm9wcywgdGhpcy5wcm9wcy5jaGlsZHJlbik7XG4gICAgICB9XG4gICAgfTtcbn0pO1xuIl19